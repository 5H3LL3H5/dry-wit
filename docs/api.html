
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="bashdoc" />
  <link href="https://fonts.googleapis.com/css?family=Lora:400,400italic|Work+Sans:300,400,500,600" rel="stylesheet" type="text/css"/>

  <title>dry-wit</title>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */
  </style>
  <style>
  * {
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
      margin-top: 0;
  }
      html, div, body { margin:0; padding:0; }
      #toc {
        width: 25%;
        margin:50px 0 0 0;
        padding:0 2%;
        float: left;
        background: #3E4042;
        color: #dadada;
      }
      body {
      font-family: "Work sans", Helvetica, Arial, sans-serif;
      font-size: 15px;
      line-height: 1.4;
      background: #3E4042;
      }
  
      h1,h2,h3,h4,h5,h6 {
        font-family: "Work sans","Helvetica Neue", Helvetica, Arial, sans-serif;
        font-weight: 500;
      }
  
      #toc ul { padding:0; margin:0; }
      #toc > ul > li { margin-bottom: 2em; }
      #toc li { list-style: none; padding-left:0; }
      #toc ul ul { padding-left: 1.25em; }
      #toc code { display:none; }
      #toc a {
        color: #dadada;
        text-decoration: none;
      }
      #toc a:hover {
        color: #fff;
      }
      #content {
        padding: 50px 5% 50px 5%;
        margin:0 0 0 25%;
        background: #fff;
      }
  
      .section pre {
        border-radius: 10px;
        border:1px solid #dadada;
        background: #ededed;
        width:100%;
        padding:5px;
        font-family: monospace;
        font-size:120%
      }
  
      pre.sourceCode {
        border-radius: 0;
        border: 0;
        background: none;
        padding-top:10px;
        width: 100%;
        font-size: 90%;
      }
  
      .module .section {
        padding-left: 2em;
      }
  
      .module .section p::first-letter {
        text-transform: capitalize;
      }
  
      .module h4 { margin-bottom:0 !important; }
  
      p { 
        width: 80%;
        text-align: justify;
      }
  
      .module p {
        padding-left: 1em;
        color: #555;
        font-style: italic;
      }
  
    .module h2 { margin-bottom:0.2em; margin-top: 2.5em;}
    .module h2:before {
       content: "module";
       color: #888;
       font-family: monospace;
       font-size: 90%;
       padding-right:0.4em;
    }
  
    .module h3:before {
       content: "function";
       color: #888;
       font-family: monospace;
       font-size: 90%;
       padding-right:0.4em;
    }
  
    .module dl {
      padding: 0.5em;
    }
    .module dt {
      display: inline-block;
      min-width: 125px;
      font-weight: bold;
      color: #333;
    }
    .module dd:after {
      display: block;
      content: "";
    }
    .module dt:after {
      content: ":";
    }
    .module dd {
      display: inline;
      margin: 0;
    }
    .module h3 code {
      font-size: 80%;
      color: #555;
    }
  
    hr { margin-top:2em; margin-bottom: 2em; border:1px solid #555;
    background: none; }
    div.sourceCode { width: 100% !important; }
    td.lineNumbers { padding-left:0 !important; }
    .sourceCode pre { margin-bottom:0 !important; }
    .sourceCode { margin-bottom: 0.5em !important; }
  
  
  h1 code,h2 code,h3 code,h4 code,.section p code, dl code {
    background: none !important;
    color: #555 !important;
  }
  </style>
<body class="book toc2 toc-left">
<div id="toc" class="toc2">
<ul>
<li><a href="#api-reference-dry-wit">API Reference (dry-wit)</a><ul>
<li><a href="#array">array</a><ul>
<li><a href="#arraycontains-array-element">arrayContains <code>array</code> <code>element</code></a></li>
<li><a href="#arraydoesnotcontain-array-element">arrayDoesNotContain <code>array</code> <code>element</code></a></li>
<li><a href="#clearassociativearray-array">clearAssociativeArray <code>array</code></a></li>
<li><a href="#flattenarray-array-separator">flattenArray <code>array</code> <code>separator</code></a></li>
<li><a href="#foreachassociativearrayentrydo-array-callback">forEachAssociativeArrayEntryDo <code>array</code> <code>callback</code></a></li>
<li><a href="#isarrayempty-array">isArrayEmpty <code>array</code></a></li>
<li><a href="#retrieveassociativearraykeys-array">retrieveAssociativeArrayKeys <code>array</code></a></li>
</ul></li>
<li><a href="#cache">cache</a><ul>
<li><a href="#cache-function-functionarguments">cache <code>function</code> <code>functionArguments</code></a></li>
<li><a href="#uncache-function-functionarguments">uncache <code>function</code> <code>functionArguments</code></a></li>
</ul></li>
<li><a href="#check">check</a><ul>
<li><a href="#checkfunctionpresent-paramname-function-paramindex">checkFunctionPresent <code>paramName</code> <code>function</code> <code>paramIndex</code></a></li>
<li><a href="#checkmandatoryoroptional-paramname-paramvalue-paramindex">checkMandatoryOrOptional <code>paramName</code> <code>paramValue</code> <code>paramIndex</code></a></li>
<li><a href="#checknotempty-paramname-paramvalue-paramindex">checkNotEmpty <code>paramName</code> <code>paramValue</code> <code>paramIndex</code></a></li>
<li><a href="#checkoneof-paramname-paramvalue-validvalues-paramindex">checkOneOf <code>paramName</code> <code>paramValue</code> <code>validValues</code> <code>paramIndex</code></a></li>
</ul></li>
<li><a href="#cli">cli</a><ul>
<li><a href="#addcommandlineflag-longname-shortname-description-mandatoryoptional-expects_argumentno_argument-defaultvalue">addCommandLineFlag <code>longName</code> <code>shortName</code> <code>description</code> <code>MANDATORY/OPTIONAL</code> <code>EXPECTS_ARGUMENT/NO_ARGUMENT</code> <code>defaultValue?</code></a></li>
<li><a href="#addcommandlineparameter-paramname-paramdescription-mandatoryoptional-singlemultiple">addCommandLineParameter <code>paramName</code> <code>paramDescription</code> <code>MANDATORY/OPTIONAL</code> <code>SINGLE/MULTIPLE</code></a></li>
<li><a href="#flagenabled-flagname">flagEnabled <code>flagName</code></a></li>
<li><a href="#removecommandlineflag-shortorlongname">removeCommandLineFlag <code>shortOrLongName</code></a></li>
<li><a href="#setscriptcopyright-copyrightdescription">setScriptCopyright <code>copyrightDescription</code></a></li>
<li><a href="#setscriptdescription-description">setScriptDescription <code>description</code></a></li>
<li><a href="#setscriptlicensesummary-licensedescription">setScriptLicenseSummary <code>licenseDescription</code></a></li>
</ul></li>
<li><a href="#color">color</a><ul>
<li><a href="#buildcolor-name-foreground-background">buildColor <code>name</code> <code>foreground</code> <code>background</code></a></li>
</ul></li>
<li><a href="#command">command</a><ul>
<li><a href="#runcommand-command">runCommand <code>command</code></a></li>
<li><a href="#runcommandasuidgid-uid-gid-folder-command">runCommandAsUidGid <code>uid</code> <code>gid</code> <code>folder</code> <code>command+</code></a></li>
<li><a href="#runcommandasuserandgroup-user-group-folder-command">runCommandAsUserAndGroup <code>user</code> <code>group</code> <code>folder</code> <code>command+</code></a></li>
<li><a href="#runcommandlongoutput-command">runCommandLongOutput <code>command</code></a></li>
</ul></li>
<li><a href="#constant">constant</a><ul>
<li><a href="#evalconstant-constantname">evalConstant <code>constantName</code></a></li>
</ul></li>
<li><a href="#date">date</a><ul>
<li><a href="#date2jd-year-month-day">date2jd <code>year</code> <code>month</code> <code>day</code></a></li>
<li><a href="#date2jds-year-month-day-hour-minute-second">date2jds <code>year</code> <code>month</code> <code>day</code> <code>hour</code> <code>minute</code> <code>second</code></a></li>
<li><a href="#jd2date-date">jd2date <code>date</code></a></li>
<li><a href="#jds2date-timestamp">jds2date <code>timestamp</code></a></li>
</ul></li>
<li><a href="#debug">debug</a><ul>
<li><a href="#debugarray-arrayname">debugArray <code>arrayName</code></a></li>
<li><a href="#debugassociativearray-arrayname">debugAssociativeArray <code>arrayName</code></a></li>
<li><a href="#debugassociativearrayentry-key-value">debugAssociativeArrayEntry <code>key</code> <code>value</code></a></li>
<li><a href="#debugecho-message">debugEcho <code>message</code></a></li>
<li><a href="#debugvariable-varname-varvalue">debugVariable <code>varName</code> <code>varValue+</code></a></li>
<li><a href="#isdebugechoenabled">isDebugEchoEnabled</a></li>
<li><a href="#setdebugechoenabled-bool">setDebugEchoEnabled <code>bool</code></a></li>
<li><a href="#setdebuglogfile-filename">setDebugLogFile <code>fileName</code></a></li>
<li><a href="#traceapicall">traceApiCall</a></li>
</ul></li>
<li><a href="#dw-plumbing">dw-plumbing</a><ul>
<li><a href="#checkreq-dependency-errorcode">checkReq <code>dependency</code> <code>errorCode?</code></a></li>
<li><a href="#cleanup">cleanup</a></li>
<li><a href="#isfunctionmissing-funcname-scriptfile">isFunctionMissing <code>funcName</code> <code>scriptFile?</code></a></li>
<li><a href="#isfunctionpresent-funcname-scriptfile">isFunctionPresent <code>funcName</code> <code>scriptFile?</code></a></li>
</ul></li>
<li><a href="#echo">echo</a><ul>
<li><a href="#allowscolors">allowsColors</a></li>
<li><a href="#echocolorizedtext-text-keyword-defaultcolor">echoColorizedText <code>text</code> <code>keyword</code> <code>defaultColor?</code></a></li>
<li><a href="#echocolorizedtextwithcolor--n-colorname-text">echoColorizedTextWithColor <code>[-n]?</code> <code>colorName</code> <code>text</code></a></li>
<li><a href="#echoincolor--n-colorname-text">echoInColor <code>[-n]?</code> <code>colorName</code> <code>text</code></a></li>
<li><a href="#getcolor-name-defaultcolor">getColor <code>name</code> <code>defaultColor?</code></a></li>
<li><a href="#resetcolor">resetColor</a></li>
</ul></li>
<li><a href="#envvar">envvar</a><ul>
<li><a href="#definebutdonotoverrideenvvar-varname-description-defaultvalue-command">defineButDoNotOverrideEnvVar <code>varName</code> <code>description</code> <code>defaultValue</code> <code>command?</code></a></li>
<li><a href="#defineenvvar-varname-mandatoryoptional-description-defaultvalue-command">defineEnvVar <code>varName</code> <code>MANDATORY|OPTIONAL</code> <code>description</code> <code>defaultValue?</code> <code>command?</code></a></li>
<li><a href="#evalenvvars">evalEnvVars</a></li>
<li><a href="#evalvar-varname">evalVar <code>varName</code></a></li>
<li><a href="#isenvvardefined-varname">isEnvVarDefined <code>varName</code></a></li>
<li><a href="#isenvvarmandatory-varname">isEnvVarMandatory <code>varName</code></a></li>
<li><a href="#isenvvaroptional-varname">isEnvVarOptional <code>varName</code></a></li>
<li><a href="#overrideenvvar-varname-varvalue-description">overrideEnvVar <code>varName</code> <code>varValue</code> <code>description</code></a></li>
<li><a href="#printenvironment">printEnvironment</a></li>
<li><a href="#retrievecustomenvironmentvariables">retrieveCustomEnvironmentVariables</a></li>
<li><a href="#upvar-varname-value">upvar <code>varName</code> <code>value+</code></a></li>
<li><a href="#upvars--v-varname-value--an-varname-value">upvars <code>[-v</code> <code>varname</code> <code>value]</code> <code>|</code> <code>[-aN</code> <code>varname</code> <code>value+]</code></a></li>
</ul></li>
<li><a href="#error">error</a><ul>
<li><a href="#adderror-label-message">addError <code>label</code> <code>message</code></a></li>
<li><a href="#appenderrormessage-error">appendErrorMessage <code>error</code></a></li>
<li><a href="#exitwitherror-label-message">exitWithError <code>label</code> <code>message</code></a></li>
<li><a href="#exitwitherrorcode-label">exitWithErrorCode <code>label</code></a></li>
<li><a href="#iserrordefined-label">isErrorDefined <code>label</code></a></li>
<li><a href="#iserrorundefined-label">isErrorUndefined <code>label</code></a></li>
<li><a href="#printerrormessage-label">printErrorMessage <code>label</code></a></li>
<li><a href="#printexitvalues">printExitValues</a></li>
</ul></li>
<li><a href="#file">file</a><ul>
<li><a href="#addfiletocleanup-file">addFileToCleanup <code>file</code></a></li>
<li><a href="#createtempfile">createTempFile</a></li>
<li><a href="#createtempfilenocleanup">createTempFileNoCleanup</a></li>
<li><a href="#createtempfolder-parent-prefix">createTempFolder <code>parent?</code> <code>prefix?</code></a></li>
<li><a href="#fileexists-file">fileExists <code>file</code></a></li>
<li><a href="#fileisnotempty-file">fileIsNotEmpty <code>file</code></a></li>
<li><a href="#fileisreadable-file">fileIsReadable <code>file</code></a></li>
<li><a href="#fileisregularfile-file">fileIsRegularFile <code>file</code></a></li>
<li><a href="#fileiswritable-file">fileIsWritable <code>file</code></a></li>
<li><a href="#findfolderdistance-foldera-folderb">findFolderDistance <code>folderA</code> <code>folderB</code></a></li>
<li><a href="#findgreatestcommonparentfolder-foldera-folderb">findGreatestCommonParentFolder <code>folderA</code> <code>folderB</code></a></li>
<li><a href="#findinpath-file">findInPath <code>file</code></a></li>
<li><a href="#findrelativepathbetweenfolders-foldera-folderb">findRelativePathBetweenFolders <code>folderA</code> <code>folderB</code></a></li>
<li><a href="#folderexists-folder">folderExists <code>folder</code></a></li>
<li><a href="#folderexistsandisnotasymlink-folder">folderExistsAndIsNotASymlink <code>folder</code></a></li>
<li><a href="#ismacosx">isMacOSX</a></li>
<li><a href="#issymlink-path">isSymlink <code>path</code></a></li>
<li><a href="#readconffile-file">readConfFile <code>file</code></a></li>
<li><a href="#readlink-param">readLink <code>param*</code></a></li>
<li><a href="#removeextension-filename">removeExtension <code>fileName</code></a></li>
<li><a href="#retrieveabsolutepath-relativepath.">retrieveAbsolutePath <code>relativePath.</code></a></li>
<li><a href="#retrievefreediskspaceunderfolder-folder">retrieveFreeDiskSpaceUnderFolder <code>folder</code></a></li>
<li><a href="#sourcefileifexists-file">sourceFileIfExists <code>file</code></a></li>
<li><a href="#uncompress-file-outputfolder">uncompress <code>file</code> <code>outputFolder</code></a></li>
</ul></li>
<li><a href="#logging">logging</a><ul>
<li><a href="#definedtag-tag">definedTag <code>tag</code></a></li>
<li><a href="#disablequietmode">disableQuietMode</a></li>
<li><a href="#enablequietmode">enableQuietMode</a></li>
<li><a href="#findoutkeyword-text">findOutKeyword <code>text</code></a></li>
<li><a href="#getlogcategory">getLogCategory</a></li>
<li><a href="#getlogcategorynamespace">getLogCategoryNamespace</a></li>
<li><a href="#isdebugenabled">isDebugEnabled</a></li>
<li><a href="#isfailurekeyword-keyword">isFailureKeyword <code>keyword</code></a></li>
<li><a href="#isinfoenabled">isInfoEnabled</a></li>
<li><a href="#islowerthaninfoenabled">isLowerThanInfoEnabled</a></li>
<li><a href="#isquietmode">isQuietMode</a></li>
<li><a href="#issuccesskeyword-keyword">isSuccessKeyword <code>keyword</code></a></li>
<li><a href="#istraceenabled">isTraceEnabled</a></li>
<li><a href="#log-message">log <code>message</code></a></li>
<li><a href="#logdebug-message">logDebug <code>message</code></a></li>
<li><a href="#logdebugfile-file">logDebugFile <code>file</code></a></li>
<li><a href="#logdebugfilecontents-file">logDebugFileContents <code>file</code></a></li>
<li><a href="#logdebugresult-successfailure-message">logDebugResult <code>SUCCESS|FAILURE</code> <code>message</code></a></li>
<li><a href="#logfile-file">logFile <code>file</code></a></li>
<li><a href="#loginfo-message">logInfo <code>message</code></a></li>
<li><a href="#loginfofile-file">logInfoFile <code>file</code></a></li>
<li><a href="#loginforesult-successfailure-message">logInfoResult <code>SUCCESS|FAILURE</code> <code>message</code></a></li>
<li><a href="#logresult-successfailure-message">logResult <code>SUCCESS|FAILURE</code> <code>message</code></a></li>
<li><a href="#logtrace-message">logTrace <code>message</code></a></li>
<li><a href="#logtracefile-file">logTraceFile <code>file</code></a></li>
<li><a href="#logtraceresult-keyword-message">logTraceResult <code>keyword</code> <code>message</code></a></li>
<li><a href="#resolveverbosity">resolveVerbosity</a></li>
<li><a href="#setdebugenabled">setDebugEnabled</a></li>
<li><a href="#setinfoenabled">setInfoEnabled</a></li>
<li><a href="#setlogcategory">setLogCategory</a></li>
<li><a href="#setlogcategorynamespace-namespace">setLogCategoryNamespace <code>namespace</code></a></li>
<li><a href="#setquietmode-mode">setQuietMode <code>mode</code></a></li>
<li><a href="#settraceenabled">setTraceEnabled</a></li>
</ul></li>
<li><a href="#net">net</a><ul>
<li><a href="#hostisreachable-host">hostIsReachable <code>host</code></a></li>
<li><a href="#retrieveiface">retrieveIface</a></li>
<li><a href="#retrieveifaces">retrieveIfaces</a></li>
<li><a href="#retrieveip-interface">retrieveIp <code>interface</code></a></li>
<li><a href="#retrieveownip">retrieveOwnIp</a></li>
<li><a href="#retrievesubnet24-interface">retrieveSubnet24 <code>interface</code></a></li>
</ul></li>
<li><a href="#package">package</a><ul>
<li><a href="#isinstalled-program">isInstalled <code>program</code></a></li>
</ul></li>
<li><a href="#ssh">ssh</a><ul>
<li><a href="#remotesshcommand-user-server-command">remoteSshCommand <code>user</code> <code>server</code> <code>command</code></a></li>
<li><a href="#remotesshcommandpipe-user-server-command-previouspipe">remoteSshCommandPipe <code>user</code> <code>server</code> <code>command</code> <code>previousPipe</code></a></li>
</ul></li>
<li><a href="#stdlib">stdlib</a><ul>
<li><a href="#areequal-first-second">areEqual <code>first</code> <code>second</code></a></li>
<li><a href="#arenotequal-first-second">areNotEqual <code>first</code> <code>second</code></a></li>
<li><a href="#isdefined-var">isDefined <code>var</code></a></li>
<li><a href="#isempty-value">isEmpty <code>value</code></a></li>
<li><a href="#isfalse-value">isFalse <code>value</code></a></li>
<li><a href="#isfunctiondefined-functionname">isFunctionDefined <code>functionName</code></a></li>
<li><a href="#isnotempty-value">isNotEmpty <code>value</code></a></li>
<li><a href="#isnotzero-value">isNotZero <code>value</code></a></li>
<li><a href="#istrue-value">isTrue <code>value</code></a></li>
<li><a href="#isvariabledefined-var">isVariableDefined <code>var</code></a></li>
<li><a href="#iszero-value">isZero <code>value</code></a></li>
</ul></li>
<li><a href="#string">string</a><ul>
<li><a href="#contains-text-substring">contains <code>text</code> <code>substring</code></a></li>
<li><a href="#endswith-text-substring">endsWith <code>text</code> <code>substring</code></a></li>
<li><a href="#normalize-text">normalize <code>text</code></a></li>
<li><a href="#normalizeuppercase-string">normalizeUppercase <code>string</code></a></li>
<li><a href="#removeprefix-text-prefix">removePrefix <code>text</code> <code>prefix</code></a></li>
<li><a href="#removesuffix-text-suffix">removeSuffix <code>text</code> <code>suffix</code></a></li>
<li><a href="#replacenleftmosttokens-text-newtoken-n-separator">replaceNLeftmostTokens <code>text</code> <code>newToken</code> <code>n</code> <code>separator</code></a></li>
<li><a href="#replacenrightmosttokens-text-newtoken-n-separator">replaceNRightmostTokens <code>text</code> <code>newToken</code> <code>n</code> <code>separator</code></a></li>
<li><a href="#startswith-text-substring">startsWith <code>text</code> <code>substring</code></a></li>
<li><a href="#tolower-text">toLower <code>text</code></a></li>
<li><a href="#toupper-text">toUpper <code>text</code></a></li>
</ul></li>
<li><a href="#sudo">sudo</a><ul>
<li><a href="#checkpasswordlesssudo">checkPasswordlessSudo</a></li>
</ul></li>
<li><a href="#term">term</a><ul>
<li><a href="#gettermwidth">getTermWidth</a></li>
<li><a href="#gettermwidthforterm-term">getTermWidthForTerm <code>term</code></a></li>
<li><a href="#retrieveterm">retrieveTERM</a></li>
</ul></li>
<li><a href="#url">url</a><ul>
<li><a href="#urlencode-url">urlEncode <code>url</code></a></li>
</ul></li>
<li><a href="#usage">usage</a><ul>
<li><a href="#printhelp">printHelp</a></li>
<li><a href="#printusage">printUsage</a></li>
</ul></li>
<li><a href="#user">user</a><ul>
<li><a href="#addusertogroup-username-groupname">addUserToGroup <code>userName</code> <code>groupName</code></a></li>
<li><a href="#creategroup-groupname-groupid">createGroup <code>groupName</code> <code>groupId?</code></a></li>
<li><a href="#createuser-username">createUser <code>userName</code></a></li>
<li><a href="#deletegroup-groupname">deleteGroup <code>groupName</code></a></li>
<li><a href="#deleteuser-username">deleteUser <code>userName</code></a></li>
<li><a href="#gidalreadyexists-gid">gidAlreadyExists <code>gid</code></a></li>
<li><a href="#groupalreadyexists-group">groupAlreadyExists <code>group</code></a></li>
<li><a href="#resolvecommandforuser-username-command">resolveCommandForUser <code>userName</code> <code>command</code></a></li>
<li><a href="#retrievegidfromgroup-group">retrieveGidFromGroup <code>group</code></a></li>
<li><a href="#retrievegroupfromgid-group">retrieveGroupFromGid <code>group</code></a></li>
<li><a href="#retrieveownergid-path">retrieveOwnerGid <code>path</code></a></li>
<li><a href="#retrieveowneruid-path">retrieveOwnerUid <code>path</code></a></li>
<li><a href="#retrieveuidfromuser-user">retrieveUidFromUser <code>user</code></a></li>
<li><a href="#retrieveuserfromuid-user">retrieveUserFromUid <code>user</code></a></li>
<li><a href="#uidalreadyexists-uid">uidAlreadyExists <code>uid</code></a></li>
<li><a href="#updategroupgid-groupname-gid">updateGroupGid <code>groupName</code> <code>gid</code></a></li>
<li><a href="#updateusergid-username-gid">updateUserGid <code>userName</code> <code>gid</code></a></li>
<li><a href="#updateuseruid-username-uid">updateUserUid <code>userName</code> <code>uid</code></a></li>
<li><a href="#useralreadyexists-user">userAlreadyExists <code>user</code></a></li>
</ul></li>
</ul></li>
<li><a href="#api-reference-ext">API Reference (ext)</a><ul>
<li><a href="#concourse">concourse</a><ul>
<li><a href="#flylogin-target-url">flyLogin <code>target</code> <code>url</code></a></li>
<li><a href="#runflycommand-yyyesyesnnnono-command-arg">runFlyCommand <code>y|Y|yes|YES|n|N|no|NO</code> <code>command</code> <code>arg*</code></a></li>
</ul></li>
<li><a href="#docker">docker</a><ul>
<li><a href="#connectdockercontainertonetwork-container-network">connectDockerContainerToNetwork <code>container</code> <code>network</code></a></li>
<li><a href="#copytodockercontainer-file-container-containerfolder">copyToDockerContainer <code>file</code> <code>container</code> <code>containerFolder</code></a></li>
<li><a href="#createdockernetwork-network">createDockerNetwork <code>network</code></a></li>
<li><a href="#dockercommand-command-args">dockerCommand <code>command</code> <code>args*</code></a></li>
<li><a href="#dockercontainerexists-container">dockerContainerExists <code>container</code></a></li>
<li><a href="#dockernetworkexists-network">dockerNetworkExists <code>network</code></a></li>
<li><a href="#isdockercontainerrunning-container">isDockerContainerRunning <code>container</code></a></li>
<li><a href="#removedockernetwork-network">removeDockerNetwork <code>network</code></a></li>
<li><a href="#retrievedockercontainerstatus-container">retrieveDockerContainerStatus <code>container</code></a></li>
</ul></li>
<li><a href="#git">git</a><ul>
<li><a href="#retrievegitbranch">retrieveGitBranch</a></li>
<li><a href="#retrievegitrepositoryurl">retrieveGitRepositoryUrl</a></li>
</ul></li>
<li><a href="#phabricator">phabricator</a><ul>
<li><a href="#retrievecredentialpasswordfromphabricator-keyid-phabricatorurl-apitoken">retrieveCredentialPasswordFromPhabricator <code>keyId</code> <code>phabricatorUrl</code> <code>apiToken</code></a></li>
<li><a href="#retrievecredentialprivatekeyfromphabricator-keyid-phabricatorurl-apitoken">retrieveCredentialPrivateKeyFromPhabricator <code>keyId</code> <code>phabricatorUrl</code> <code>apiToken</code></a></li>
<li><a href="#retrievecredentialusernamefromphabricator-keyid-phabricatorurl-apitoken">retrieveCredentialUsernameFromPhabricator <code>keyId</code> <code>phabricatorUrl</code> <code>apiToken</code></a></li>
</ul></li>
<li><a href="#rabbitmq">rabbitmq</a><ul>
<li><a href="#adduser-username-password">addUser <code>username</code> <code>password</code></a></li>
<li><a href="#addvhost-virtualhost">addVhost <code>virtualHost</code></a></li>
<li><a href="#declarebdbinding-source-destinationtype-destination-routingkey">declareBdbinding <code>source</code> <code>destinationType</code> <code>destination</code> <code>routingKey</code></a></li>
<li><a href="#declareexchange-name-type-durable-internal-args">declareExchange <code>name</code> <code>type</code> <code>durable</code> <code>internal</code> <code>args*</code></a></li>
<li><a href="#declarequeue-name-durable">declareQueue <code>name</code> <code>durable</code></a></li>
<li><a href="#deleteuser-user">deleteUser <code>user</code></a></li>
<li><a href="#israbbitmqrunning">isRabbitmqRunning</a></li>
<li><a href="#rabbitmq_migrate">rabbitmq_migrate</a></li>
<li><a href="#setpermissions-virtualhost-user-configurepermissions-writepermissions-readpermissions">setPermissions <code>virtualHost</code> <code>user</code> <code>configurePermissions</code> <code>writePermissions</code> <code>readPermissions</code></a></li>
<li><a href="#setpolicy-name-match-body-type">setPolicy <code>name</code> <code>match</code> <code>body</code> <code>type</code></a></li>
<li><a href="#setusertags-user-tags">setUserTags <code>user</code> <code>tags+</code></a></li>
</ul></li>
<li><a href="#vault">vault</a><ul>
<li><a href="#authorizeinvault">authorizeInVault</a></li>
<li><a href="#buildpipelineparameterpathinvault-folder-team-pipeline-parameter">buildPipelineParameterPathInVault <code>folder</code> <code>team</code> <code>pipeline</code> <code>parameter</code></a></li>
<li><a href="#checkvaultrunning">checkVaultRunning</a></li>
<li><a href="#createorstartvaultcontainer-virtualhost-network">createOrStartVaultContainer <code>virtualHost</code> <code>network</code></a></li>
<li><a href="#deletevaultcontainer-containername">deleteVaultContainer <code>containerName</code></a></li>
<li><a href="#generatevaulthclfile-file-leasettl-maxleasettl-vaultip">generateVaultHclFile <code>file</code> <code>leaseTTL</code> <code>maxLeaseTTL</code> <code>vaultIP</code></a></li>
<li><a href="#retrievevaulttoken-file">retrieveVaultToken <code>file</code></a></li>
<li><a href="#retrievevaulturl">retrieveVaultUrl</a></li>
<li><a href="#runvaultcommand-command-args">runVaultCommand <code>command</code> <code>args*</code></a></li>
<li><a href="#writefileinvault-source-destination">writeFileInVault <code>source</code> <code>destination</code></a></li>
<li><a href="#writevalueinvault-destination-value">writeValueInVault <code>destination</code> <code>value</code></a></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="content">
<div id="header">
<h1>dry-wit</h1>
</div>
<section id="api-reference-dry-wit" class="level1">
<h1>API Reference (dry-wit)</h1>
<section id="array" class="level2 module">
<h2>array</h2>
<p>Functions related to arrays and associative arrays.</p>
<section id="arraycontains-array-element" class="level3 function">
<h3>arrayContains <code>array</code> <code>element</code></h3>
<p>Checks if an element is already contained in an array.</p>
<section id="parameters" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>array</code></dt>
<dd>The array (passed as “${array[@]}”).
</dd>
<dt><code>element</code></dt>
<dd>The element to check.
</dd>
</dl>
<p>Returns 0/TRUE if the element is present in the array; 1/FALSE otherwise.</p>
</section>
<section id="usage-example" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="va">a=(</span><span class="st">&quot;one&quot;</span> <span class="st">&quot;two&quot;</span> <span class="st">&quot;three&quot;</span> <span class="st">&quot;other number&quot;</span><span class="va">)</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">if</span> <span class="ex">arrayContains</span> <span class="st">&quot;</span><span class="va">${a[@]}</span><span class="st">&quot;</span> <span class="st">&quot;other number&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="arraydoesnotcontain-array-element" class="level3 function">
<h3>arrayDoesNotContain <code>array</code> <code>element</code></h3>
<p>Checks if an element is not already contained in an array.</p>
<section id="parameters-1" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>array</code></dt>
<dd>The array (passed as “${array[@]}”).
</dd>
<dt><code>element</code></dt>
<dd>The element to check.
</dd>
</dl>
<p>Returns 0/TRUE if the element is not present in the array; 1/FALSE Otherwise.</p>
</section>
<section id="usage-example-1" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" title="1"><span class="va">a=(</span><span class="st">&quot;one&quot;</span> <span class="st">&quot;two&quot;</span> <span class="st">&quot;three&quot;</span> <span class="st">&quot;other number&quot;</span><span class="va">)</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">if</span> <span class="ex">arrayDoesNotContain</span> <span class="st">&quot;</span><span class="va">${a[@]}</span><span class="st">&quot;</span> <span class="st">&quot;four&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="clearassociativearray-array" class="level3 function">
<h3>clearAssociativeArray <code>array</code></h3>
<p>Clears given associative array.</p>
<section id="parameters-2" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>array</code></dt>
<dd>The associative array.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-2" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="ex">clearAssociativeArray</span> myArray<span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="flattenarray-array-separator" class="level3 function">
<h3>flattenArray <code>array</code> <code>separator</code></h3>
<p>Flattens an array, using given separator.</p>
<section id="parameters-3" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>array</code></dt>
<dd>The name of the array variable.
</dd>
<dt><code>separator</code></dt>
<dd>The separator to use.
</dd>
</dl>
<p>The variable RESULT contains the resulting string.</p>
</section>
<section id="usage-example-3" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb4-1" title="1"><span class="va">A=(</span>a b c<span class="va">)</span>; <span class="ex">flattenArray</span> A <span class="st">&quot;x&quot;</span><span class="kw">;</span> <span class="bu">echo</span> <span class="st">&quot;A-&gt;</span><span class="va">${RESULT}</span><span class="st">&quot;</span> <span class="co"># axbxc</span></a></code></pre></div>
</section>
</section>
<section id="foreachassociativearrayentrydo-array-callback" class="level3 function">
<h3>forEachAssociativeArrayEntryDo <code>array</code> <code>callback</code></h3>
<p>Calls a given function for each entry found in given associative array.</p>
<section id="parameters-4" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>array</code></dt>
<dd>The name of the associative array variable.
</dd>
<dt><code>callback</code></dt>
<dd>The name of the callback function.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-4" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">function</span><span class="fu"> process_code()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;Code: </span><span class="va">${1}</span><span class="st">, description: </span><span class="va">${2}</span><span class="st">&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="kw">}</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="ex">...</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="ex">forEachAssociativeArrayEntryDo</span> <span class="st">&quot;CODE_DESCRIPTION_MAPPING&quot;</span> <span class="st">&quot;process_code&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="isarrayempty-array" class="level3 function">
<h3>isArrayEmpty <code>array</code></h3>
<p>Checks whether given array is empty.</p>
<section id="parameters-5" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>array</code></dt>
<dd>The name of the array.
</dd>
</dl>
<p>Returns 0/TRUE if the array is empty; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-5" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">if</span> <span class="ex">isArrayEmpty</span> array<span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrieveassociativearraykeys-array" class="level3 function">
<h3>retrieveAssociativeArrayKeys <code>array</code></h3>
<p>Extracts the keys of given associative array.</p>
<section id="parameters-6" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>array</code></dt>
<dd>The array name.
</dd>
</dl>
<p>The variable RESULT contains the list of the keys, wrapped in double quotes.</p>
</section>
<section id="usage-example-6" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb7-1" title="1"><span class="va">myMapping=([foo]=</span>bar <span class="va">[with spaces]=</span><span class="st">&quot;with spaces&quot;</span><span class="va">)</span>;</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="ex">retrieveAssociativeArrayKeys</span> myMapping<span class="kw">;</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="kw">for</span> <span class="ex">key</span> in <span class="va">${RESULT}</span><span class="kw">;</span> <span class="kw">do</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">done</span></a></code></pre></div>
</section>
</section>
</section>
<section id="cache" class="level2 module">
<h2>cache</h2>
<p>Memoization support.</p>
<p>Adapted from http://unix.stackexchange.com/questions/38101/does-bash-have-a-built-in-caching-command-available-sort-of-like-mktemp-or-spon</p>
<section id="cache-function-functionarguments" class="level3 function">
<h3>cache <code>function</code> <code>functionArguments</code></h3>
<p>Memoizes a function call: Annotates its output, to speed up future invocations.</p>
<section id="parameters-7" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>function</code></dt>
<dd>the name of the function to call.
</dd>
<dt><code>functionArguments</code></dt>
<dd>the arguments of the function.
</dd>
</dl>
<p>Returns the result of the function call.</p>
</section>
<section id="usage-example-7" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" title="1"><span class="ex">cache</span> findPrimeNumbers 100000 <span class="co"># takes a long time</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="ex">cache</span> findPrimeNumbers 100000 <span class="co"># returns instantly</span></a></code></pre></div>
</section>
</section>
<section id="uncache-function-functionarguments" class="level3 function">
<h3>uncache <code>function</code> <code>functionArguments</code></h3>
<p>Discards previous memoized values for a function call.</p>
<section id="parameters-8" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>function</code></dt>
<dd>the name of the function..
</dd>
<dt><code>functionArguments</code></dt>
<dd>the arguments of the function.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-8" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb9-1" title="1"><span class="ex">uncache</span> findPrimeNumbers 100000</a></code></pre></div>
</section>
</section>
</section>
<section id="check" class="level2 module">
<h2>check</h2>
<p>Functions to provide ways for checking parameters.</p>
<section id="checkfunctionpresent-paramname-function-paramindex" class="level3 function">
<h3>checkFunctionPresent <code>paramName</code> <code>function</code> <code>paramIndex</code></h3>
<p>Checks whether a function is present.</p>
<section id="parameters-9" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>paramName</code></dt>
<dd>The parameter name.
</dd>
<dt><code>function</code></dt>
<dd>The function name.
</dd>
<dt><code>paramIndex</code></dt>
<dd>The parameter index.
</dd>
</dl>
<p>Exits if the check fails; otherwise returns 0/TRUE.</p>
</section>
<section id="usage-example-9" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb10-1" title="1"><span class="ex">checkFunctionPresent</span> <span class="st">&quot;callback&quot;</span> <span class="st">&quot;echo&quot;</span> 1<span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="checkmandatoryoroptional-paramname-paramvalue-paramindex" class="level3 function">
<h3>checkMandatoryOrOptional <code>paramName</code> <code>paramValue</code> <code>paramIndex</code></h3>
<p>Performs a precondition check on given parameter to ensure it’s either MANDATORY or OPTIONAL.</p>
<section id="parameters-10" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>paramName</code></dt>
<dd>The parameter name.
</dd>
<dt><code>paramValue</code></dt>
<dd>The parameter value.
</dd>
<dt><code>paramIndex</code></dt>
<dd>The parameter index.
</dd>
</dl>
<p>Exits if the check fails; otherwise returns 0/TRUE.</p>
</section>
<section id="usage-example-10" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb11-1" title="1"><span class="ex">checkMandatoryOrOptional</span> <span class="st">&quot;option&quot;</span> <span class="st">&quot;</span><span class="va">${option}</span><span class="st">&quot;</span> 1 <span class="co"># -&gt; throws an error if the first (1) parameter (&quot;option&quot;) is neither MANDATORY or OPTIONAL.</span></a></code></pre></div>
</section>
</section>
<section id="checknotempty-paramname-paramvalue-paramindex" class="level3 function">
<h3>checkNotEmpty <code>paramName</code> <code>paramValue</code> <code>paramIndex</code></h3>
<p>Performs a precondition check on given parameter to ensure it’s not empty. Exits if the check fails.</p>
<section id="parameters-11" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>paramName</code></dt>
<dd>The parameter name.
</dd>
<dt><code>paramValue</code></dt>
<dd>The parameter value.
</dd>
<dt><code>paramIndex</code></dt>
<dd>The parameter index.
</dd>
</dl>
<p>Exits if the check fails; otherwise returns 0/TRUE.</p>
</section>
<section id="usage-example-11" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb12-1" title="1"><span class="ex">checkNotEmpty</span> <span class="st">&quot;user&quot;</span> <span class="st">&quot;</span><span class="va">${user}</span><span class="st">&quot;</span> 1 <span class="co"># -&gt; throws an error if the first (1) parameter (&quot;user&quot;) is empty.</span></a></code></pre></div>
</section>
</section>
<section id="checkoneof-paramname-paramvalue-validvalues-paramindex" class="level3 function">
<h3>checkOneOf <code>paramName</code> <code>paramValue</code> <code>validValues</code> <code>paramIndex</code></h3>
<p>Performs a precondition check on given parameter to ensure it’s included in a predefined list.</p>
<section id="parameters-12" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>paramName</code></dt>
<dd>The parameter name.
</dd>
<dt><code>paramValue</code></dt>
<dd>The parameter value.
</dd>
<dt><code>validValues</code></dt>
<dd>The list of allowed values.
</dd>
<dt><code>paramIndex</code></dt>
<dd>The parameter index.
</dd>
</dl>
<p>Exits if the check fails; otherwise returns 0/TRUE.</p>
</section>
<section id="usage-example-12" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb13-1" title="1"><span class="ex">checkOneOf</span> <span class="st">&quot;option&quot;</span> <span class="st">&quot;</span><span class="va">${option}</span><span class="st">&quot;</span> <span class="st">&quot;VALID INVALID&quot;</span> 1 <span class="co"># -&gt; throws an error if the first (1) parameter (&quot;option&quot;) is neither VALID nor INVALID.</span></a></code></pre></div>
</section>
</section>
</section>
<section id="cli" class="level2 module">
<h2>cli</h2>
<p>Functions to parse and check command-line arguments.</p>
<section id="environment-variables" class="level4">
<h4>Environment variables</h4>
<dl>
<dt><code>EXPECTS_ARGUMENT</code></dt>
<dd>A constant to represent that a flag expects an argument.
</dd>
<dt><code>NO_ARGUMENT</code></dt>
<dd>A constant to represent that a flag doesn’n expect an argument.
</dd>
<dt><code>SINGLE</code></dt>
<dd>A constant to represent a parameter only accepts a value.
</dd>
</dl>
</section>
<section id="addcommandlineflag-longname-shortname-description-mandatoryoptional-expects_argumentno_argument-defaultvalue" class="level3 function">
<h3>addCommandLineFlag <code>longName</code> <code>shortName</code> <code>description</code> <code>MANDATORY/OPTIONAL</code> <code>EXPECTS_ARGUMENT/NO_ARGUMENT</code> <code>defaultValue?</code></h3>
<p>Adds a command-line flag.</p>
<section id="parameters-13" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>longName</code></dt>
<dd>The long name of the flag.
</dd>
<dt><code>shortName</code></dt>
<dd>The short name of the flag.
</dd>
<dt><code>description</code></dt>
<dd>The flag description.
</dd>
<dt><code>MANDATORY/OPTIONAL</code></dt>
<dd>MANDATORY if the flag is mandatory; OPTIONAL otherwise.
</dd>
<dt><code>EXPECTS_ARGUMENT/NO_ARGUMENT</code></dt>
<dd>EXPECTS_ARGUMENT if the flag contains a value; NO_ARGUMENT otherwise.
</dd>
<dt><code>defaultValue</code></dt>
<dd>The default value (if the flag is optional).
</dd>
</dl>
<p>Returns 0/TRUE if the flag is added successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-13" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">if</span> <span class="ex">addCommandLineFlag</span> <span class="st">&quot;file&quot;</span> <span class="st">&quot;f&quot;</span> <span class="st">&quot;The file to read&quot;</span> MANDATORY EXPECTS_ARGUMENT <span class="st">&quot;/tmp/file.log&quot;</span><span class="kw">;</span> <span class="kw">then</span></a></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb15-1" title="1">  <span class="bu">echo</span> <span class="st">&quot;-f|--file flag added&quot;</span></a></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="addcommandlineparameter-paramname-paramdescription-mandatoryoptional-singlemultiple" class="level3 function">
<h3>addCommandLineParameter <code>paramName</code> <code>paramDescription</code> <code>MANDATORY/OPTIONAL</code> <code>SINGLE/MULTIPLE</code></h3>
<p>Declares the script expects another command-line parameter.</p>
<section id="parameters-14" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>paramName</code></dt>
<dd>The parameter name.
</dd>
<dt><code>paramDescription</code></dt>
<dd>The parameter description.
</dd>
<dt><code>MANDATORY/OPTIONAL</code></dt>
<dd>MANDATORY if the parameter is mandatory; OPTIONAL otherwise.
</dd>
<dt><code>SINGLE/MULTIPLE</code></dt>
<dd>SINGLE if the parameter can not be repeated; MULTIPLE otherwise.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-14" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb17-1" title="1"><span class="ex">addCommandLineParameter</span> <span class="st">&quot;project&quot;</span> <span class="st">&quot;The project to process&quot;</span> MANDATORY SINGLE<span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="flagenabled-flagname" class="level3 function">
<h3>flagEnabled <code>flagName</code></h3>
<p>Checks whether a given flag is enabled.</p>
<section id="parameters-15" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>flagName</code></dt>
<dd>the name of the flag variable.
</dd>
</dl>
<p>Returns 0/TRUE if the flag is enabled, 1/FALSE otherwise.</p>
</section>
<section id="usage-example-15" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb18-1" title="1"><span class="kw">if</span> <span class="ex">flagEnabled</span> MY_FLAG<span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span></a></code></pre></div>
</section>
</section>
<section id="removecommandlineflag-shortorlongname" class="level3 function">
<h3>removeCommandLineFlag <code>shortOrLongName</code></h3>
<p>Removes a command-line flag.</p>
<section id="parameters-16" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>shortOrLongName</code></dt>
<dd>The flag (either short or long name).
</dd>
</dl>
<p>Returns 0/TRUE if the flag is removed successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-16" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">if</span> <span class="ex">removeCommandLineFlag</span> <span class="st">&quot;--file&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb19-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;--file flag removed&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="setscriptcopyright-copyrightdescription" class="level3 function">
<h3>setScriptCopyright <code>copyrightDescription</code></h3>
<p>Sets the script copyright message.</p>
<section id="parameters-17" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>copyrightDescription</code></dt>
<dd>The copyright message.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-17" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb20-1" title="1"><span class="ex">setScriptCopyright</span> <span class="st">&quot;2018-today Acme Inc.&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="setscriptdescription-description" class="level3 function">
<h3>setScriptDescription <code>description</code></h3>
<p>Defines the script description.</p>
<section id="parameters-18" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>description</code></dt>
<dd>The description.
</dd>
</dl>
<p>Returns 0/TRUE in any case.</p>
</section>
<section id="usage-example-18" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb21-1" title="1"><span class="ex">setScriptDescription</span> <span class="st">&quot;This script calculates fibonacci sequence items&quot;</span></a></code></pre></div>
</section>
</section>
<section id="setscriptlicensesummary-licensedescription" class="level3 function">
<h3>setScriptLicenseSummary <code>licenseDescription</code></h3>
<p>Sets the script license summary.</p>
<section id="parameters-19" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>licenseDescription</code></dt>
<dd>The license message.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-19" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb22-1" title="1"><span class="ex">setScriptLicenseSummary</span> <span class="st">&quot;Distributed this under the GNU General Public License v3.&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
</section>
<section id="color" class="level2 module">
<h2>color</h2>
<p>Functions to create color constants.</p>
<section id="buildcolor-name-foreground-background" class="level3 function">
<h3>buildColor <code>name</code> <code>foreground</code> <code>background</code></h3>
<p>Builds a new color.</p>
<section id="parameters-20" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>name</code></dt>
<dd>The color name.
</dd>
<dt><code>foreground</code></dt>
<dd>The foreground value.
</dd>
<dt><code>background</code></dt>
<dd>The background value.
</dd>
</dl>
<p>Returns 0/TRUE always. Exports <a href="#color">COLOR</a>_FG, <a href="#color">COLOR</a><em>BG, LIGHT</em><a href="#color">COLOR</a><em>FG, UNDERSCORE</em><a href="#color">COLOR</a><em>FG, BLINK</em><a href="#color">COLOR</a><em>FG and CONCEALED</em><a href="#color">COLOR</a>_FG variables.</p>
</section>
<section id="usage-example-20" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb23-1" title="1"><span class="ex">buildColor</span> <span class="st">&quot;GREEN&quot;</span> <span class="st">&quot;32&quot;</span> <span class="st">&quot;42&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
</section>
<section id="command" class="level2 module">
<h2>command</h2>
<p>Functions to run external commands.</p>
<section id="runcommand-command" class="level3 function">
<h3>runCommand <code>command</code></h3>
<p>Runs a command supporting logging of command-line and output.</p>
<section id="parameters-21" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>command</code></dt>
<dd>The command to run.
</dd>
</dl>
<p>Returns the result of the command.</p>
<p>The output is stored in the variable RESULT. If it’s expected to be longer use ‘runCommandLongOutput’ instead.</p>
</section>
<section id="usage-example-21" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">if</span> <span class="ex">runCommand</span> <span class="st">&quot;nmap -Pn&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="runcommandasuidgid-uid-gid-folder-command" class="level3 function">
<h3>runCommandAsUidGid <code>uid</code> <code>gid</code> <code>folder</code> <code>command+</code></h3>
<p>Runs a command in a folder, under a given user.</p>
<section id="parameters-22" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>uid</code></dt>
<dd>The user id.
</dd>
<dt><code>gid</code></dt>
<dd>The group id.
</dd>
<dt><code>folder</code></dt>
<dd>the folder.
</dd>
<dt><code>command</code></dt>
<dd>the command.
</dd>
</dl>
<p>Returns the result of the command.</p>
</section>
<section id="usage-example-22" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">if</span> <span class="ex">runCommandAsUidGid</span> 1000 100 /tmp <span class="st">&quot;ls -ltrhia&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb25-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;ls -ltrhia run successfully as uid 1000, gid 100, on /tmp&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb25-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="runcommandasuserandgroup-user-group-folder-command" class="level3 function">
<h3>runCommandAsUserAndGroup <code>user</code> <code>group</code> <code>folder</code> <code>command+</code></h3>
<p>Runs the command in a folder, under a given user.</p>
<section id="parameters-23" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>user</code></dt>
<dd>The user.
</dd>
<dt><code>group</code></dt>
<dd>The group.
</dd>
<dt><code>folder</code></dt>
<dd>the folder.
</dd>
<dt><code>command</code></dt>
<dd>the command.
</dd>
</dl>
<p>Returns the result of the command.</p>
</section>
<section id="usage-example-23" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb26-1" title="1"><span class="kw">if</span> <span class="ex">runCommandAsUserAndGroup</span> root root /tmp <span class="st">&quot;ls -ltrhia&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb26-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;ls -ltrhia run successfully as root/root, on /tmp&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb26-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="runcommandlongoutput-command" class="level3 function">
<h3>runCommandLongOutput <code>command</code></h3>
<p>Runs a command supporting logging of command-line and output, even if it’s long, since it uses a temporary file to store it.</p>
<section id="parameters-24" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>command</code></dt>
<dd>The command to run.
</dd>
</dl>
<p>Returns the result of the command.</p>
</section>
<section id="usage-example-24" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">if</span> <span class="ex">runCommandLongOutput</span> <span class="st">&quot;nmap -Pn&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
</section>
<section id="constant" class="level2 module">
<h2>constant</h2>
<p>Functions related to constants.</p>
<section id="evalconstant-constantname" class="level3 function">
<h3>evalConstant <code>constantName</code></h3>
<p>Retrieves the value of a constant.</p>
<section id="parameters-25" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>constantName</code></dt>
<dd>The constant name.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the constant value.</p>
</section>
<section id="usage-example-25" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb28-1" title="1"><span class="va">OTHERVAR=</span><span class="st">&quot;works&quot;</span></a>
<a class="sourceLine" id="cb28-2" title="2"><span class="va">MYVAR=</span><span class="st">&quot;OTHERVAR&quot;</span>;</a>
<a class="sourceLine" id="cb28-3" title="3"><span class="ex">evalConstant</span> <span class="st">&quot;</span><span class="va">${MYVAR}</span><span class="st">&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb28-4" title="4"><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${MYVAR}</span><span class="st">-&gt;</span><span class="va">${RESULT}</span><span class="st">&quot;</span> <span class="co"># OTHERVAR-&gt;works</span></a></code></pre></div>
</section>
</section>
</section>
<section id="date" class="level2 module">
<h2>date</h2>
<p>Functions to parse and format dates.</p>
<section id="date2jd-year-month-day" class="level3 function">
<h3>date2jd <code>year</code> <code>month</code> <code>day</code></h3>
<p>Converts given formatted date to a day-based one.</p>
<section id="parameters-26" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>year</code></dt>
<dd>The year.
</dd>
<dt><code>month</code></dt>
<dd>The month.
</dd>
<dt><code>day</code></dt>
<dd>The day.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the day-based timestamp.</p>
</section>
<section id="usage-example-26" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb29-1" title="1"><span class="ex">date2jd</span> 2019 6 2</a></code></pre></div>
</section>
</section>
<section id="date2jds-year-month-day-hour-minute-second" class="level3 function">
<h3>date2jds <code>year</code> <code>month</code> <code>day</code> <code>hour</code> <code>minute</code> <code>second</code></h3>
<p>Converts given formatted date to a second-based one.</p>
<section id="parameters-27" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>year</code></dt>
<dd>The year.
</dd>
<dt><code>month</code></dt>
<dd>The month.
</dd>
<dt><code>day</code></dt>
<dd>The day.
</dd>
<dt><code>hour</code></dt>
<dd>The hour.
</dd>
<dt><code>minute</code></dt>
<dd>The minute.
</dd>
<dt><code>second</code></dt>
<dd>The second.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the number of seconds.</p>
</section>
<section id="usage-example-27" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb30-1" title="1"><span class="ex">date2jjds</span> 2019 6 2 18 13 56</a></code></pre></div>
</section>
</section>
<section id="jd2date-date" class="level3 function">
<h3>jd2date <code>date</code></h3>
<p>Converts given date (in days) to a formatted date.</p>
<section id="parameters-28" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>date</code></dt>
<dd>The day-based timestamp.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains “year month day”</p>
</section>
<section id="usage-example-28" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb31"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb31-1" title="1"><span class="ex">jd2date</span> 135353</a></code></pre></div>
</section>
</section>
<section id="jds2date-timestamp" class="level3 function">
<h3>jds2date <code>timestamp</code></h3>
<p>Converts given date (in seconds) to a formatted date.</p>
<section id="parameters-29" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>timestamp</code></dt>
<dd>The timestamp, in seconds.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains “days hour minute second”.</p>
</section>
<section id="usage-example-29" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb32"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb32-1" title="1"><span class="ex">jds2date</span> 112412542444</a></code></pre></div>
</section>
</section>
</section>
<section id="debug" class="level2 module">
<h2>debug</h2>
<p>Functions to help while debugging scripts.</p>
<section id="debugarray-arrayname" class="level3 function">
<h3>debugArray <code>arrayName</code></h3>
<p>Prints the contents of given array.</p>
<section id="parameters-30" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>arrayName</code></dt>
<dd>The name of the array.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-30" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb33-1" title="1"><span class="va">A=(</span> <span class="st">&quot;1&quot;</span> <span class="st">&quot;2&quot;</span> <span class="st">&quot;3&quot;</span> <span class="va">)</span>;</a>
<a class="sourceLine" id="cb33-2" title="2"><span class="ex">debugArray</span> <span class="st">&quot;</span><span class="va">${A}</span><span class="st">&quot;</span></a></code></pre></div>
</section>
</section>
<section id="debugassociativearray-arrayname" class="level3 function">
<h3>debugAssociativeArray <code>arrayName</code></h3>
<p>Prints the contents of given associative array.</p>
<section id="parameters-31" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>arrayName</code></dt>
<dd>The name of the associative array.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-31" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb34"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb34-1" title="1"><span class="va">A=(</span> <span class="va">[foo]=</span>bar <span class="va">[other key]=</span><span class="st">&quot;other value&quot;</span> <span class="va">)</span>;</a>
<a class="sourceLine" id="cb34-2" title="2"><span class="ex">debugArray</span> <span class="st">&quot;</span><span class="va">${A}</span><span class="st">&quot;</span></a></code></pre></div>
</section>
</section>
<section id="debugassociativearrayentry-key-value" class="level3 function">
<h3>debugAssociativeArrayEntry <code>key</code> <code>value</code></h3>
<p>Callback to be called to debug a specific entry in an associative array.</p>
<section id="parameters-32" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>key</code></dt>
<dd>The entry key. Mandatory.
</dd>
<dt><code>value</code></dt>
<dd>The entry value. Could be empty.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-32" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb35"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb35-1" title="1"><span class="ex">forEachAssociativeArrayEntryDo</span> MY_ASSOCIATIVE_ARRAY debugAssociativeArrayEntry<span class="kw">;</span> <span class="kw">done</span></a></code></pre></div>
</section>
</section>
<section id="debugecho-message" class="level3 function">
<h3>debugEcho <code>message</code></h3>
<p>Echoes a line to stdout. Useful for locating them easily when debugging.</p>
<section id="parameters-33" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>message</code></dt>
<dd>The message to print.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-33" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb36"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb36-1" title="1"><span class="ex">debugEcho</span> <span class="st">&quot;message&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="debugvariable-varname-varvalue" class="level3 function">
<h3>debugVariable <code>varName</code> <code>varValue+</code></h3>
<p>Tries to declare a variable with given arguments.</p>
<section id="parameters-34" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>varName</code></dt>
<dd>The variable name.
</dd>
<dt><code>varValue</code></dt>
<dd>The variable value(s).
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-34" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb37"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb37-1" title="1"><span class="ex">debugVariable</span> <span class="st">&quot;foo&quot;</span> <span class="st">&quot;bar&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="isdebugechoenabled" class="level3 function">
<h3>isDebugEchoEnabled</h3>
<p>Retrieves whether “debugEcho” is enabled.</p>
<p>Returns 0/TRUE if it’s enabled; 1/FALSE otherwise.</p>
<section id="usage-example-35" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb38"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb38-1" title="1"><span class="kw">if</span> <span class="ex">isDebugEchoEnabled</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="setdebugechoenabled-bool" class="level3 function">
<h3>setDebugEchoEnabled <code>bool</code></h3>
<p>Specifies whether “debugEcho” is enabled.</p>
<section id="parameters-35" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>bool</code></dt>
<dd>That condition.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-36" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb39"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb39-1" title="1"><span class="ex">setDebugEchoEnabled</span> TRUE<span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="setdebuglogfile-filename" class="level3 function">
<h3>setDebugLogFile <code>fileName</code></h3>
<p>Specifies the log file for debugging purposes.</p>
<section id="parameters-36" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>fileName</code></dt>
<dd>The log file.
</dd>
</dl>
<p>Returns 0/TRUE if the log file can be used for writing; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-37" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb40"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb40-1" title="1"><span class="ex">setDebugLogFile</span> <span class="st">&quot;/tmp/.dw-debug.log&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="traceapicall" class="level3 function">
<h3>traceApiCall</h3>
<p>Traces the API call to the default log file using in development.</p>
<p>Returns 0/TRUE always.</p>
<section id="usage-example-38" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb41-1" title="1"><span class="ex">traceApiCall</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
</section>
<section id="dw-plumbing" class="level2 module">
<h2>dw-plumbing</h2>
<p>Functions internal to dry-wit</p>
<section id="environment-variables-1" class="level4">
<h4>Environment variables</h4>
<dl>
<dt><code>MANDATORY</code></dt>
<dd>Represents mandatory parameters.
</dd>
<dt><code>OPTIONAL</code></dt>
<dd>Represents optional parameters.
</dd>
</dl>
</section>
<section id="checkreq-dependency-errorcode" class="level3 function">
<h3>checkReq <code>dependency</code> <code>errorCode?</code></h3>
<p>Performs the checks for a required dependency.</p>
<section id="parameters-37" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>dependency</code></dt>
<dd>The dependency.
</dd>
<dt><code>errorCode</code></dt>
<dd>The error code, optional.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-39" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb42"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb42-1" title="1"><span class="ex">checkReq</span> jq<span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="cleanup" class="level3 function">
<h3>cleanup</h3>
<p>Cleans up temporary resources.</p>
<p>Returns 0/TRUE always.</p>
<section id="usage-example-40" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb43"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb43-1" title="1"><span class="ex">cleanup</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="isfunctionmissing-funcname-scriptfile" class="level3 function">
<h3>isFunctionMissing <code>funcName</code> <code>scriptFile?</code></h3>
<p>Checks if given function is missing.</p>
<section id="parameters-38" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>funcName</code></dt>
<dd>The function name.
</dd>
<dt><code>scriptFile</code></dt>
<dd>The script file. Optional.
</dd>
</dl>
<p>Returns 0/TRUE if the function is missing; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-41" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb44"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb44-1" title="1"><span class="kw">if</span> <span class="ex">isFunctionMissing</span> <span class="st">&quot;myFunc&quot;</span> <span class="st">&quot;myScript.sh&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb44-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;myFunc is not defined in myScript.sh&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb44-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="isfunctionpresent-funcname-scriptfile" class="level3 function">
<h3>isFunctionPresent <code>funcName</code> <code>scriptFile?</code></h3>
<p>Checks if given function is present.</p>
<section id="parameters-39" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>funcName</code></dt>
<dd>The function name.
</dd>
<dt><code>scriptFile</code></dt>
<dd>The script file. Optional.
</dd>
</dl>
<p>Returns 0/TRUE if the function is found; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-42" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb45"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb45-1" title="1"><span class="kw">if</span> <span class="ex">isFunctionPresent</span> <span class="st">&quot;myFunc&quot;</span> <span class="st">&quot;myScript.sh&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb45-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;myFunc is defined in myScript.sh&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb45-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
</section>
<section id="echo" class="level2 module">
<h2>echo</h2>
<p>Functions related to displaying text to stdout.</p>
<section id="allowscolors" class="level3 function">
<h3>allowsColors</h3>
<p>Checks whether the terminal allows colors or not.</p>
<p>Returns 0/TRUE if the terminal supports colors; 1/FALSE otherwise.</p>
<section id="usage-example-43" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb46"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb46-1" title="1"><span class="kw">if</span> <span class="ex">allowsColors</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="echocolorizedtext-text-keyword-defaultcolor" class="level3 function">
<h3>echoColorizedText <code>text</code> <code>keyword</code> <code>defaultColor?</code></h3>
<p>Echoes given text, colorized.</p>
<section id="parameters-40" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>text</code></dt>
<dd>The text to colorize.
</dd>
<dt><code>keyword</code></dt>
<dd>The keyword (0 -&gt; success; 1 -&gt; failure; other -&gt; try to infer from the text).
</dd>
<dt><code>defaultColor</code></dt>
<dd>The default color (optional).
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-44" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb47"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb47-1" title="1"><span class="ex">echoColorizeText</span> <span class="st">&quot;done&quot;</span> SUCCESS<span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="echocolorizedtextwithcolor--n-colorname-text" class="level3 function">
<h3>echoColorizedTextWithColor <code>[-n]?</code> <code>colorName</code> <code>text</code></h3>
<p>Echoes given text, colorized.</p>
<section id="parameters-41" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>-n</code></dt>
<dd>Whether to include a new line at the end of the text.
</dd>
<dt><code>colorName</code></dt>
<dd>The name of the color.
</dd>
<dt><code>text</code></dt>
<dd>The text to colorize.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-45" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb48"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb48-1" title="1"><span class="ex">echoColorizeTextWithColor</span> WHITE <span class="st">&quot;done&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="echoincolor--n-colorname-text" class="level3 function">
<h3>echoInColor <code>[-n]?</code> <code>colorName</code> <code>text</code></h3>
<p>Prints a text in color.</p>
<section id="parameters-42" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>-n</code></dt>
<dd>Whether to remove the CRLF from the end (optional).
</dd>
<dt><code>colorName</code></dt>
<dd>The name of the color.
</dd>
<dt><code>text</code></dt>
<dd>The text to echo.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-46" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb49"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb49-1" title="1"><span class="ex">echoInColor</span> -n RED <span class="st">&quot;Work in progress&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="getcolor-name-defaultcolor" class="level3 function">
<h3>getColor <code>name</code> <code>defaultColor?</code></h3>
<p>Retrieves the color for given name.</p>
<section id="parameters-43" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>name</code></dt>
<dd>The color name.
</dd>
<dt><code>defaultColor</code></dt>
<dd>The fallback color. Optional.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the color value.</p>
</section>
<section id="usage-example-47" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb50"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb50-1" title="1"><span class="ex">getColor</span> RED<span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="resetcolor" class="level3 function">
<h3>resetColor</h3>
<p>Resets the color for future calls to “echo”.</p>
<p>Returns 0/TRUE always.</p>
<section id="usage-example-48" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb51"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb51-1" title="1"><span class="ex">resetColor</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
</section>
<section id="envvar" class="level2 module">
<h2>envvar</h2>
<p>Functions to define and evaluate environment variables.</p>
<p>Using work from: http://fvue.nl/wiki/Bash:_Passing_variables_by_reference</p>
<section id="definebutdonotoverrideenvvar-varname-description-defaultvalue-command" class="level3 function">
<h3>defineButDoNotOverrideEnvVar <code>varName</code> <code>description</code> <code>defaultValue</code> <code>command?</code></h3>
<p>Defines an environment variable, if it’s not already defined.</p>
<section id="parameters-44" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>varName</code></dt>
<dd>The variable name.
</dd>
<dt><code>description</code></dt>
<dd>The variable description.
</dd>
<dt><code>defaultValue</code></dt>
<dd>The default value.
</dd>
<dt><code>command</code></dt>
<dd>An optional command to provide the variable value at runtime.
</dd>
</dl>
<p>Returns 0/TRUE if the variable is defined; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-49" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb52"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb52-1" title="1"><span class="kw">if</span> <span class="ex">defineButDoNotOverrideEnvVar</span> <span class="st">&quot;MY_VAR&quot;</span> <span class="st">&quot;MY_VAR is used for this and that&quot;</span> <span class="st">&quot;dummy&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb52-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;MY_VAR defined&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb52-3" title="3"><span class="kw">else</span></a>
<a class="sourceLine" id="cb52-4" title="4">  <span class="bu">echo</span> <span class="st">&quot;MY_VAR already defined. Not overridden&quot;</span></a>
<a class="sourceLine" id="cb52-5" title="5"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="defineenvvar-varname-mandatoryoptional-description-defaultvalue-command" class="level3 function">
<h3>defineEnvVar <code>varName</code> <code>MANDATORY|OPTIONAL</code> <code>description</code> <code>defaultValue?</code> <code>command?</code></h3>
<p>Declares a new environment variable.</p>
<section id="parameters-45" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>varName</code></dt>
<dd>The variable name.
</dd>
<dt><code>MANDATORY|OPTIONAL</code></dt>
<dd>Whether is the variable is mandatory or not.
</dd>
<dt><code>description</code></dt>
<dd>The variable description.
</dd>
<dt><code>defaultValue</code></dt>
<dd>The default value (optional).
</dd>
<dt><code>command</code></dt>
<dd>The command to retrieve the actual value (optional).
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-50" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb53"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb53-1" title="1"><span class="ex">defineEnvVar</span> <span class="st">&quot;MY_VAR&quot;</span> MANDATORY <span class="st">&quot;My env var&quot;</span> <span class="st">&quot;foo&quot;</span> <span class="st">&quot;date&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="evalenvvars" class="level3 function">
<h3>evalEnvVars</h3>
<p>Resolves the value of all custom environment variables.</p>
<p>Returns 0/TRUE always.</p>
<section id="usage-example-51" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb54-1" title="1"><span class="ex">evalEnvVars</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="evalvar-varname" class="level3 function">
<h3>evalVar <code>varName</code></h3>
<p>Retrieves the value of given variable.</p>
<section id="parameters-46" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>varName</code></dt>
<dd>The variable name.
</dd>
</dl>
<p>Returns 0/TRUE if the value could be retrieved; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the variable value.</p>
</section>
<section id="usage-example-52" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb55"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb55-1" title="1"><span class="kw">if</span> <span class="ex">evalVar</span> <span class="st">&quot;MY_VAR&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb55-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;MY_VAR -&gt; </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb55-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="isenvvardefined-varname" class="level3 function">
<h3>isEnvVarDefined <code>varName</code></h3>
<p>Checks whether giver variable is defined.</p>
<section id="parameters-47" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>varName</code></dt>
<dd>The variable name.
</dd>
</dl>
<p>Returns 0/TRUE if the variable is defined; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-53" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb56"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb56-1" title="1"><span class="kw">if</span> <span class="ex">isEnvVarDefined</span> <span class="st">&quot;MY_VAR&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb56-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;MY_VAR is defined already&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb56-3" title="3"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb56-4" title="4"><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${_variable}</span><span class="st"> already defined&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb56-5" title="5"><span class="bu">exit</span> 1<span class="kw">;</span></a>
<a class="sourceLine" id="cb56-6" title="6"><span class="va">rescode=${TRUE}</span>;</a>
<a class="sourceLine" id="cb56-7" title="7"><span class="bu">break</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="isenvvarmandatory-varname" class="level3 function">
<h3>isEnvVarMandatory <code>varName</code></h3>
<p>Checks whether given environment variable is mandatory.</p>
<section id="parameters-48" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>varName</code></dt>
<dd>The variable name.
</dd>
</dl>
<p>Returns 0/TRUE if the variable is mandatory; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-54" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb57"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb57-1" title="1"><span class="kw">if</span> <span class="ex">isEnvVarMandatory</span> <span class="st">&quot;MY_VAR&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb57-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;MY_VAR is mandatory&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb57-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="isenvvaroptional-varname" class="level3 function">
<h3>isEnvVarOptional <code>varName</code></h3>
<p>Checks whether given environment variable is optional.</p>
<section id="parameters-49" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>varName</code></dt>
<dd>The variable name.
</dd>
</dl>
<p>Returns 0/TRUE if the variable is optional; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-55" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb58"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb58-1" title="1"><span class="kw">if</span> <span class="ex">isEnvVarMandatory</span> <span class="st">&quot;MY_VAR&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb58-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;MY_VAR is optional&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb58-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="overrideenvvar-varname-varvalue-description" class="level3 function">
<h3>overrideEnvVar <code>varName</code> <code>varValue</code> <code>description</code></h3>
<p>Overrides the value of an environment variable.</p>
<section id="parameters-50" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>varName</code></dt>
<dd>The variable name.
</dd>
<dt><code>varValue</code></dt>
<dd>The variable value.
</dd>
<dt><code>description</code></dt>
<dd>The variable description (optional).
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-56" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb59"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb59-1" title="1"><span class="ex">overrideEnvVar</span> MY_VAR <span class="st">&quot;new-value&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="printenvironment" class="level3 function">
<h3>printEnvironment</h3>
<p>Prints the environment variables.</p>
<p>Returns 0/TRUE always.</p>
<section id="usage-example-57" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb60"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb60-1" title="1"> <span class="ex">printEnvironment</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="retrievecustomenvironmentvariables" class="level3 function">
<h3>retrieveCustomEnvironmentVariables</h3>
<p>Retrieves the custom environment variables.</p>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the environment variables.</p>
<section id="usage-example-58" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb61"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb61-1" title="1"><span class="ex">retrieveCustomEnvironmentVariables</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb61-2" title="2"><span class="bu">echo</span> <span class="st">&quot;Custom environment variables: </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="upvar-varname-value" class="level3 function">
<h3>upvar <code>varName</code> <code>value+</code></h3>
<p>Assigns a variable one scope above the caller.</p>
<section id="parameters-51" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>varName</code></dt>
<dd>The variable name to assign value to.
</dd>
<dt><code>value</code></dt>
<dd>The value(s) to assign. If multiple values, an array is assigned, otherwise a single value is assigned.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>NOTE: For assigning multiple variables, use ‘upvars’. Do NOT use multiple ‘upvar’ calls, since one ‘upvar’ call might reassign a variable to be used by another ‘upvar’ call.</p>
</section>
<section id="usage-example-59" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb62"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb62-1" title="1"><span class="fu">f()</span> <span class="kw">{</span> <span class="bu">local</span> <span class="va">b</span>; <span class="ex">g</span> b<span class="kw">;</span> <span class="bu">echo</span> <span class="va">$b</span><span class="kw">;</span> <span class="kw">}</span></a>
<a class="sourceLine" id="cb62-2" title="2"><span class="fu">g()</span> <span class="kw">{</span> <span class="bu">local</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="kw">&amp;&amp;</span> <span class="ex">upvar</span> <span class="va">$1</span> bar<span class="kw">;</span> <span class="kw">}</span></a>
<a class="sourceLine" id="cb62-3" title="3"><span class="ex">f</span>  <span class="co"># Ok: b=bar</span></a></code></pre></div>
</section>
</section>
<section id="upvars--v-varname-value--an-varname-value" class="level3 function">
<h3>upvars <code>[-v</code> <code>varname</code> <code>value]</code> <code>|</code> <code>[-aN</code> <code>varname</code> <code>value+]</code></h3>
<p>Assign variables one scope above the caller</p>
<p>Usage: local varname [varname …] &amp;&amp; upvars [-v varname value] | [-aN varname [value …]] …</p>
<section id="parameters-52" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>-v</code></dt>
<dd>Assign single value to varname.
</dd>
<dt><code>varname</code></dt>
<dd>The name of the variable.
</dd>
<dt><code>-aN</code></dt>
<dd>Assign next N values to varname as array.
</dd>
<dt><code>value</code></dt>
<dd>The value(s) to assign.
</dd>
</dl>
<p>Returns 0/TRUE if the variables are assigned; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-60" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb63"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb63-1" title="1"><span class="fu">f()</span> <span class="kw">{</span> <span class="bu">local</span> <span class="va">a</span> <span class="va">b</span>; <span class="ex">g</span> a b<span class="kw">;</span> <span class="bu">declare</span> -p <span class="va">a</span> <span class="va">b</span>; <span class="kw">}</span></a>
<a class="sourceLine" id="cb63-2" title="2"><span class="fu">g()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb63-3" title="3">  <span class="bu">local</span> <span class="va">c=(</span> foo bar <span class="va">)</span></a>
<a class="sourceLine" id="cb63-4" title="4">  <span class="bu">local</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$2</span><span class="st">&quot;</span> <span class="kw">&amp;&amp;</span> <span class="ex">upvars</span> -v <span class="va">$1</span> A -a<span class="va">${#c[@]}</span> <span class="va">$2</span> <span class="st">&quot;</span><span class="va">${c[@]}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb63-5" title="5"><span class="kw">}</span></a>
<a class="sourceLine" id="cb63-6" title="6"><span class="ex">f</span>  <span class="co"># Ok: a=A, b=(foo bar)</span></a></code></pre></div>
</section>
</section>
</section>
<section id="error" class="level2 module">
<h2>error</h2>
<p>Functions related to declaring and using errors.</p>
<section id="adderror-label-message" class="level3 function">
<h3>addError <code>label</code> <code>message</code></h3>
<p>Annotates a new error.</p>
<section id="parameters-53" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>label</code></dt>
<dd>The error label.
</dd>
<dt><code>message</code></dt>
<dd>The error message.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-61" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb64"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb64-1" title="1"><span class="ex">addError</span> INVALID_NAME <span class="st">&quot;The name is not valid&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="appenderrormessage-error" class="level3 function">
<h3>appendErrorMessage <code>error</code></h3>
<p>Appends a new error to ERROR_MESSAGES.</p>
<section id="parameters-54" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>error</code></dt>
<dd>The error to add.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-62" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb65"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb65-1" title="1"><span class="ex">appendErrorMessage</span> <span class="st">&quot;item&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="exitwitherror-label-message" class="level3 function">
<h3>exitWithError <code>label</code> <code>message</code></h3>
<p>Exits with an error.</p>
<section id="parameters-55" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>label</code></dt>
<dd>The error label.
</dd>
<dt><code>message</code></dt>
<dd>The error message.
</dd>
</dl>
</section>
<section id="usage-example-63" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb66"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb66-1" title="1"><span class="ex">exitWithError</span> UNKNOWN_OPTION <span class="st">&quot;Unknown option&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="exitwitherrorcode-label" class="level3 function">
<h3>exitWithErrorCode <code>label</code></h3>
<p>Exits with an error code associated with given error label.</p>
<section id="parameters-56" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>label</code></dt>
<dd>The error label.
</dd>
</dl>
</section>
<section id="usage-example-64" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb67"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb67-1" title="1"><span class="ex">exitWithErrorCode</span> UNKNOWN_OPTION<span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="iserrordefined-label" class="level3 function">
<h3>isErrorDefined <code>label</code></h3>
<p>Checks whether an error is defined.</p>
<section id="parameters-57" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>label</code></dt>
<dd>The error label.
</dd>
</dl>
<p>0/TRUE if the error is defined; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-65" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb68"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb68-1" title="1"><span class="kw">if</span> <span class="ex">isErrorDefined</span> INVALID_NAME<span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb68-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;INVALID_NAME already defined&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb68-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="iserrorundefined-label" class="level3 function">
<h3>isErrorUndefined <code>label</code></h3>
<p>Checks whether an error is undefined.</p>
<section id="parameters-58" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>label</code></dt>
<dd>The error label.
</dd>
</dl>
<p>Returns 0/TRUE if the error is undefined; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-66" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb69"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb69-1" title="1"><span class="kw">if</span> <span class="ex">isErrorUndefined</span> INVALID_NAME<span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb69-2" title="2">  <span class="ex">addError</span> INVALID_NAME <span class="st">&quot;The name is not valid&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb69-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="printerrormessage-label" class="level3 function">
<h3>printErrorMessage <code>label</code></h3>
<p>Prints the error message for given label.</p>
<section id="parameters-59" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>label</code></dt>
<dd>The error label.
</dd>
</dl>
<p>Returns 0/TRUE if the error is found and gets printed; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-67" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb70"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb70-1" title="1"><span class="kw">if</span> <span class="ex">printErrorMessage</span> INVALID_OPTION<span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="printexitvalues" class="level3 function">
<h3>printExitValues</h3>
<p>Prints the exit values.</p>
<p>Returns 0/TRUE always.</p>
<section id="usage-example-68" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb71"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb71-1" title="1"><span class="ex">printExitValues</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
</section>
<section id="file" class="level2 module">
<h2>file</h2>
<p>Functions dealing with files.</p>
<section id="environment-variables-2" class="level4">
<h4>Environment variables</h4>
<dl>
<dt><code>_CLEANUP_FILES</code></dt>
<dd>The temporary files to cleanup.
</dd>
</dl>
</section>
<section id="addfiletocleanup-file" class="level3 function">
<h3>addFileToCleanup <code>file</code></h3>
<p>Annotates a file to be removed.</p>
<section id="parameters-60" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file to delete.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-69" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb72"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb72-1" title="1"><span class="ex">addFileToCleanup</span> <span class="st">&quot;/tmp/my-log.txt&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="createtempfile" class="level3 function">
<h3>createTempFile</h3>
<p>Creates a new temporary file.</p>
<p>Returns 0/TRUE if the file gets created successfully; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the name of the temporary file.</p>
<section id="usage-example-70" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb73"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb73-1" title="1"><span class="kw">if</span> <span class="ex">createTempFile</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb73-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;Temp file: </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb73-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="createtempfilenocleanup" class="level3 function">
<h3>createTempFileNoCleanup</h3>
<p>Creates a new temporary file, without managing its cleanup.</p>
<p>Returns 0/TRUE if the file gets created successfully; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the name of the temporary file.</p>
<section id="usage-example-71" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb74"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb74-1" title="1"><span class="kw">if</span> <span class="ex">createTempFileNoCleanup</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb74-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;Temp file: </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb74-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="createtempfolder-parent-prefix" class="level3 function">
<h3>createTempFolder <code>parent?</code> <code>prefix?</code></h3>
<p>Creates a temporary folder.</p>
<section id="parameters-61" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>parent</code></dt>
<dd>The parent folder. Optional.
</dd>
<dt><code>prefix</code></dt>
<dd>The folder name prefix. Optional.
</dd>
</dl>
<p>Returns 0/TRUE if the folder gets created successfully; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the new folder.</p>
</section>
<section id="usage-example-72" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb75"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb75-1" title="1"><span class="kw">if</span> <span class="ex">createTempFolder</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb75-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;New folder: </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb75-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="fileexists-file" class="level3 function">
<h3>fileExists <code>file</code></h3>
<p>Checks if given file exists.</p>
<section id="parameters-62" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file to check.
</dd>
</dl>
<p>Returns 0/TRUE if the file exists; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-73" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb76"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb76-1" title="1"><span class="kw">if</span> <span class="ex">fileExists</span> <span class="st">&quot;/tmp/test.txt&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="fileisnotempty-file" class="level3 function">
<h3>fileIsNotEmpty <code>file</code></h3>
<p>Checks if given file is not empty.</p>
<section id="parameters-63" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file to check.
</dd>
</dl>
<p>Returns 0/TRUE if the file is not empty; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-74" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb77"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb77-1" title="1"><span class="kw">if</span> <span class="ex">fileIsNotEmpty</span> <span class="st">&quot;/tmp/test.txt&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="fileisreadable-file" class="level3 function">
<h3>fileIsReadable <code>file</code></h3>
<p>Checks if given file is readable.</p>
<section id="parameters-64" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file to check.
</dd>
</dl>
<p>Returns 0/TRUE if the file is readable; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-75" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb78"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb78-1" title="1"><span class="kw">if</span> <span class="ex">fileIsReadable</span> <span class="st">&quot;/tmp/test.txt&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="fileisregularfile-file" class="level3 function">
<h3>fileIsRegularFile <code>file</code></h3>
<p>Checks if given file is a regular file.</p>
<section id="parameters-65" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file to check.
</dd>
</dl>
<p>Returns 0/TRUE if the file is a regular file; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-76" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb79"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb79-1" title="1"><span class="kw">if</span> <span class="ex">fileIsRegularFile</span> <span class="st">&quot;/tmp/test.txt&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="fileiswritable-file" class="level3 function">
<h3>fileIsWritable <code>file</code></h3>
<p>Checks if given file is writable.</p>
<section id="parameters-66" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file to check.
</dd>
</dl>
<p>Returns 0/TRUE if the file is writable; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-77" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb80"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb80-1" title="1"><span class="kw">if</span> <span class="ex">fileIsWritable</span> <span class="st">&quot;/tmp/test.txt&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="findfolderdistance-foldera-folderb" class="level3 function">
<h3>findFolderDistance <code>folderA</code> <code>folderB</code></h3>
<p>Finds the distance between two folders.</p>
<section id="parameters-67" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>folderA</code></dt>
<dd>The first folder.
</dd>
<dt><code>folderB</code></dt>
<dd>The second folder.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the distance.</p>
</section>
<section id="usage-example-78" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb81"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb81-1" title="1"><span class="ex">findFolderDistance</span> <span class="st">&quot;/home/myuser/a/b/c&quot;</span> <span class="st">&quot;/home/myuser/a/b/d/e&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="findgreatestcommonparentfolder-foldera-folderb" class="level3 function">
<h3>findGreatestCommonParentFolder <code>folderA</code> <code>folderB</code></h3>
<p>Finds the greatest common parent folder</p>
<section id="parameters-68" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>folderA</code></dt>
<dd>The first folder.
</dd>
<dt><code>folderB</code></dt>
<dd>The second folder.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the parent folder.</p>
</section>
<section id="usage-example-79" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb82"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb82-1" title="1"><span class="ex">findGreatestCommonParentFolder</span> <span class="va">${HOME}</span>/a/b/c <span class="va">${HOME}</span>/a/b/d/e<span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="findinpath-file" class="level3 function">
<h3>findInPath <code>file</code></h3>
<p>Finds a given file within a PATH variable.</p>
<section id="parameters-69" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file name to look for.
</dd>
</dl>
<p>Prints the file path via (stdin).</p>
</section>
<section id="usage-example-80" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb83"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb83-1" title="1"><span class="bu">local</span> <span class="va">path=</span><span class="st">&quot;</span><span class="va">$(</span><span class="ex">findInPath</span> myFile<span class="va">)</span><span class="st">&quot;</span>;</a></code></pre></div>
</section>
</section>
<section id="findrelativepathbetweenfolders-foldera-folderb" class="level3 function">
<h3>findRelativePathBetweenFolders <code>folderA</code> <code>folderB</code></h3>
<p>Given two paths, A and B, finds the shortest way to reach B from A.</p>
<section id="parameters-70" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>folderA</code></dt>
<dd>The first folder.
</dd>
<dt><code>folderB</code></dt>
<dd>The second folder.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the relative path.</p>
</section>
<section id="usage-example-81" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb84"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb84-1" title="1"><span class="ex">findRelativePathBetweenFolders</span> <span class="va">${HOME}</span>/a/b/c <span class="va">${HOME}</span>/a/d/e<span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="folderexists-folder" class="level3 function">
<h3>folderExists <code>folder</code></h3>
<p>Checks whether given folder exists.</p>
<section id="parameters-71" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>folder</code></dt>
<dd>The folder to check.
</dd>
</dl>
<p>Returns 0/TRUE if the folder exists; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-82" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb85"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb85-1" title="1"><span class="kw">if</span> <span class="ex">folderExists</span> <span class="st">&quot;/tmp&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb85-2" title="2">  <span class="fu">rm</span> -rf /tmp/*<span class="kw">;</span></a>
<a class="sourceLine" id="cb85-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="folderexistsandisnotasymlink-folder" class="level3 function">
<h3>folderExistsAndIsNotASymlink <code>folder</code></h3>
<p>Checks whether given folder exists and it’s not a symbolic link.</p>
<section id="parameters-72" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>folder</code></dt>
<dd>The folder to check.
</dd>
</dl>
<p>Returns 0/TRUE if the folder exists; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-83" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb86"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb86-1" title="1"><span class="kw">if</span> <span class="ex">folderExistsAndIsNotASymlink</span> <span class="st">&quot;/tmp&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="ismacosx" class="level3 function">
<h3>isMacOSX</h3>
<p>Checks if the system is a MacOSX.</p>
<p>Returns 0/TRUE if the system is MacOSX; 1/FALSE otherwise.</p>
<section id="usage-example-84" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb87"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb87-1" title="1"><span class="kw">if</span> <span class="ex">isMacOSX</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb87-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;I&#39;m running on a MacOSX&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb87-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="issymlink-path" class="level3 function">
<h3>isSymlink <code>path</code></h3>
<p>Checks whether given path is a symlink.</p>
<section id="parameters-73" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>path</code></dt>
<dd>The path to check.
</dd>
</dl>
<p>Returns 0/TRUE if the path is a symlink; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-85" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb88"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb88-1" title="1"><span class="kw">if</span> <span class="ex">isSymlink</span> <span class="st">&quot;/tmp&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="readconffile-file" class="level3 function">
<h3>readConfFile <code>file</code></h3>
<p>Reads given configuration file.</p>
<section id="parameters-74" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The config file.
</dd>
</dl>
<p>Returns 0/TRUE if the file is read successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-86" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb89"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb89-1" title="1"><span class="kw">if</span> <span class="ex">readConfFile</span> <span class="st">&quot;/tmp/app.conf&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb89-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;/tmp/app.conf read successfully&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb89-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="readlink-param" class="level3 function">
<h3>readLink <code>param*</code></h3>
<p>Runs readlink (differs in Linux and in MacOSX).</p>
<section id="parameters-75" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>param</code></dt>
<dd>The readlink parameters.
</dd>
</dl>
<p>Returns the result code of readlink.</p>
<p>The variable RESULT contains the output of readlink.</p>
</section>
<section id="usage-example-87" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb90"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb90-1" title="1"><span class="kw">if</span> <span class="ex">readLink</span> -f <span class="st">&quot;/bin/bash&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb90-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;readlink result: </span><span class="va">${RESULT}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb90-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="removeextension-filename" class="level3 function">
<h3>removeExtension <code>fileName</code></h3>
<p>Removes the extension from given file name.</p>
<section id="parameters-76" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>fileName</code></dt>
<dd>The file name.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the file name, without the extension.</p>
</section>
<section id="usage-example-88" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb91"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb91-1" title="1"><span class="ex">removeExtension</span> <span class="st">&quot;myfile.sh&quot;</span> <span class="co"># -&gt; RESULT=&quot;myfile&quot;;</span></a></code></pre></div>
</section>
</section>
<section id="retrieveabsolutepath-relativepath." class="level3 function">
<h3>retrieveAbsolutePath <code>relativePath.</code></h3>
<p>Retrieves the absolute path of given argument.</p>
<section id="parameters-77" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>relativePath</code></dt>
<dd>The relative path.
</dd>
</dl>
<p>Returns 0/TRUE if the file was found; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the absolute path.</p>
</section>
<section id="usage-example-89" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb92"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb92-1" title="1"><span class="kw">if</span> <span class="ex">retrieveAbsolutePath</span> <span class="st">&#39;./myfile&#39;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb92-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;absolute path: </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb92-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrievefreediskspaceunderfolder-folder" class="level3 function">
<h3>retrieveFreeDiskSpaceUnderFolder <code>folder</code></h3>
<p>Retrieves the disk space available in the filesystem containing given folder. Prints the available space in bytes.</p>
<section id="parameters-78" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>folder</code></dt>
<dd>The folder.
</dd>
</dl>
<p>Returns 0/TRUE if the space could be calculated; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-90" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb93"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb93-1" title="1"><span class="kw">if</span> <span class="ex">retrieveFreeDiskSpaceUnderFolder</span> <span class="st">&quot;/tmp&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb93-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;/tmp -&gt; </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb93-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="sourcefileifexists-file" class="level3 function">
<h3>sourceFileIfExists <code>file</code></h3>
<p>Sources given file, if it exists.</p>
<section id="parameters-79" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file to source.
</dd>
</dl>
<p>Returns 0/TRUE if the file is sourced; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-91" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb94"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb94-1" title="1"><span class="ex">sourceFileIfExists</span> <span class="st">&quot;/tmp/my-env&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="uncompress-file-outputfolder" class="level3 function">
<h3>uncompress <code>file</code> <code>outputFolder</code></h3>
<p>Uncompresses given file to a concrete folder.</p>
<section id="parameters-80" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file.
</dd>
<dt><code>outputFolder</code></dt>
<dd>The output folder.
</dd>
</dl>
<p>Returns 0/TRUE if the file is uncompressed successfully; 1/FALSE if the format of the file is invalid; and 2 if there’s some other error when uncompressing the file.</p>
</section>
<section id="usage-example-92" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb95"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb95-1" title="1"><span class="ex">uncompress</span> <span class="st">&quot;my.zip&quot;</span> <span class="st">&quot;/tmp&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
</section>
<section id="logging" class="level2 module">
<h2>logging</h2>
<p>Logging functions</p>
<section id="environment-variables-3" class="level4">
<h4>Environment variables</h4>
<dl>
<dt><code>SUCCESS_KEYWORDS</code></dt>
<dd>The success keywords.
</dd>
<dt><code>FAILURE_KEYWORDS</code></dt>
<dd>The failure keywords.
</dd>
<dt><code>SUCCESS</code></dt>
<dd>Indicates the operation has succeeded.
</dd>
<dt><code>FAILURE</code></dt>
<dd>Indicates the operation has failed.
</dd>
<dt><code>IN_PROGRESS</code></dt>
<dd>Indicates the operation is in progress.
</dd>
<dt><code>UNDEFINED</code></dt>
<dd>Indicates the operation outcome is undefined.
</dd>
<dt><code>SUCCESS_COLOR</code></dt>
<dd>The color used to indicate the operation succeeded.
</dd>
<dt><code>FAILURE_COLOR</code></dt>
<dd>The color used to indicate the operation failed.
</dd>
<dt><code>IN_PROGRESS_COLOR</code></dt>
<dd>The color used to indicate the operation is in progress.
</dd>
<dt><code>UNDEFINED_COLOR</code></dt>
<dd>The color used to indicate unknown operation outcomes.
</dd>
<dt><code>DEFAULT_LOG_PREFIX_COLOR</code></dt>
<dd>The default color used for log prefixes.
</dd>
<dt><code>DEFAULT_LOG_OUTCOME_COLOR</code></dt>
<dd>The default color used for outcomes.
</dd>
<dt><code>DEFAULT_LOG_RESUMING_TASK_COLOR</code></dt>
<dd>The default color used when resuming tasks.
</dd>
<dt><code>LOG_PFEFIX_COLORS</code></dt>
<dd>The colors used in log prefixes.
</dd>
<dt><code>LOG_PREFIX_TOKENS</code></dt>
<dd>The tokens used in log prefixes.
</dd>
<dt><code>LOG_PREFIX_TIMESTAMP_POSITION</code></dt>
<dd>The position of the timestamp in LOG_PREFIX_TOKENS.
</dd>
<dt><code>LOG_PREFIX_CATEGORY_POSITION</code></dt>
<dd>The position of the category in LOG_PREFIX_TOKENS.
</dd>
<dt><code>LOG_PREFIX_LEVEL_POSITION</code></dt>
<dd>The position of the level in LOG_PREFIX_TOKENS.
</dd>
<dt><code>INFO_LOG_PREFIX_TOKEN</code></dt>
<dd>The symbol used to represent INFO level.
</dd>
<dt><code>DEBUG_LOG_PREFIX_TOKEN</code></dt>
<dd>The symbol used to represent DEBUG level.
</dd>
<dt><code>TRACE_LOG_PREFIX_TOKEN</code></dt>
<dd>The symbol used to represent TRACE level.
</dd>
<dt><code>LOG_OUTCOME_COLORS</code></dt>
<dd>The colors used when printing the operation outcome.
</dd>
<dt><code>LOG_OUTCOME_TOKENS</code></dt>
<dd>The tokens used when printing the operation outcome.
</dd>
<dt><code>LOG_OUTCOME_TEXT_POSITION</code></dt>
<dd>The position of the text in LOG_OUTCOME_TOKENS.
</dd>
</dl>
</section>
<section id="definedtag-tag" class="level3 function">
<h3>definedTag <code>tag</code></h3>
<p>Checks whether given tag is defined.</p>
<section id="parameters-81" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>tag</code></dt>
<dd>The tag to check.
</dd>
</dl>
<p>0/TRUE if the tag is defined; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-93" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb96"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb96-1" title="1"><span class="ex">definedTag</span> SUCCESS</a></code></pre></div>
</section>
</section>
<section id="disablequietmode" class="level3 function">
<h3>disableQuietMode</h3>
<p>Disables quiet mode.</p>
<p>Returns 0/TRUE always.</p>
<section id="usage-example-94" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb97"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb97-1" title="1"><span class="ex">disableQuietMode</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="enablequietmode" class="level3 function">
<h3>enableQuietMode</h3>
<p>Enables quiet mode.</p>
<p>Returns 0/TRUE always.</p>
<section id="usage-example-95" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb98"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb98-1" title="1"><span class="ex">enableQuietMode</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="findoutkeyword-text" class="level3 function">
<h3>findOutKeyword <code>text</code></h3>
<p>Guesses the type of keyword associated to given text.</p>
<section id="parameters-82" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>text</code></dt>
<dd>The text of the keyword.
</dd>
</dl>
<p>Returns SUCCESS, FAILURE, or UNDEFINED.</p>
</section>
<section id="usage-example-96" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb99"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb99-1" title="1"><span class="ex">findOutKeyword</span> <span class="st">&quot;done&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb99-2" title="2"><span class="bu">local</span> -i <span class="va">keyword=$?</span>;</a></code></pre></div>
</section>
</section>
<section id="getlogcategory" class="level3 function">
<h3>getLogCategory</h3>
<p>Retrieves the log category.</p>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the log category.</p>
<section id="usage-example-97" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb100"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb100-1" title="1"><span class="ex">getLogCategory</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb100-2" title="2"><span class="bu">echo</span> <span class="st">&quot;Log category: </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="getlogcategorynamespace" class="level3 function">
<h3>getLogCategoryNamespace</h3>
<p>Retrieves the log category namespace.</p>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the log category namespace.</p>
<section id="usage-example-98" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb101"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb101-1" title="1"><span class="ex">getLogCategoryNamespace</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb101-2" title="2"><span class="bu">echo</span> <span class="st">&quot;log category namespace: </span><span class="va">${RESULT}</span><span class="st">&quot;</span></a></code></pre></div>
</section>
</section>
<section id="isdebugenabled" class="level3 function">
<h3>isDebugEnabled</h3>
<p>Checks whether the debug level is enabled.</p>
<p>Returns 0/TRUE if debug is allowed; 1/FALSE otherwise.</p>
<section id="usage-example-99" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb102"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb102-1" title="1"><span class="ex">isDebugEnabled</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="isfailurekeyword-keyword" class="level3 function">
<h3>isFailureKeyword <code>keyword</code></h3>
<p>Checks whether given keyword represents a failure.</p>
<section id="parameters-83" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>keyword</code></dt>
<dd>The keyword.
</dd>
</dl>
<p>Returns 0/TRUE if the keyword is considered a failure; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-100" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb103"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb103-1" title="1"><span class="kw">if</span> <span class="ex">isFailureKeyword</span> <span class="st">&quot;</span><span class="va">${keyword}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">logInfoResult</span> SUCCESS <span class="st">&quot;done&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="isinfoenabled" class="level3 function">
<h3>isInfoEnabled</h3>
<p>Checks whether the “info” level is enabled.</p>
<p>Returns 0/TRUE in such case; 1/FALSE otherwise.</p>
<section id="usage-example-101" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb104"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb104-1" title="1"><span class="kw">if</span> <span class="ex">isInfoEnabled</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="islowerthaninfoenabled" class="level3 function">
<h3>isLowerThanInfoEnabled</h3>
<p>Checks whether the enabled log level is lower than “info”.</p>
<p>Returns 0/TRUE in such case; 1/FALSE otherwise.</p>
<section id="usage-example-102" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb105"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb105-1" title="1"><span class="kw">if</span> <span class="ex">isLowerThanInfoEnabled</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="isquietmode" class="level3 function">
<h3>isQuietMode</h3>
<p>Retrieves whether the quiet mode is on or off.</p>
<p>Returns 0/TRUE if the mode is enabled; 1/FALSE otherwise.</p>
<section id="usage-example-103" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb106"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb106-1" title="1"><span class="kw">if</span> <span class="ex">isQuietMode</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="issuccesskeyword-keyword" class="level3 function">
<h3>isSuccessKeyword <code>keyword</code></h3>
<p>Checks whether given keyword represents a success.</p>
<section id="parameters-84" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>keyword</code></dt>
<dd>The keyword.
</dd>
</dl>
<p>Returns 0/TRUE if the keyword is considered a success; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-104" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb107"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb107-1" title="1"><span class="kw">if</span> <span class="ex">isSuccessKeyword</span> <span class="st">&quot;</span><span class="va">${keyword}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">logInfoResult</span> SUCCESS <span class="st">&quot;done&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="istraceenabled" class="level3 function">
<h3>isTraceEnabled</h3>
<p>Checks whether trace is enabled.</p>
<p>Returns 0/TRUE if trace is enabled; 1/FALSE otherwise.</p>
<section id="usage-example-105" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb108"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb108-1" title="1"><span class="ex">isTraceEnabled</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="log-message" class="level3 function">
<h3>log <code>message</code></h3>
<p>Logs a message as “info”.</p>
<section id="parameters-85" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>message</code></dt>
<dd>The message to log.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-106" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb109"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb109-1" title="1"><span class="ex">log</span> <span class="st">&quot;Operation in progress&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="logdebug-message" class="level3 function">
<h3>logDebug <code>message</code></h3>
<p>Logs given message under the “debug” level.</p>
<section id="parameters-86" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>message</code></dt>
<dd>The message to log.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-107" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb110"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb110-1" title="1"><span class="ex">logDebug</span> <span class="st">&quot;Operation in progress&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="logdebugfile-file" class="level3 function">
<h3>logDebugFile <code>file</code></h3>
<p>Logs the contents of given file, under the “debug” level.</p>
<section id="parameters-87" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file to log.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-108" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb111"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb111-1" title="1"><span class="ex">logDebugFile</span> <span class="st">&#39;/tmp/my-log.txt&#39;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="logdebugfilecontents-file" class="level3 function">
<h3>logDebugFileContents <code>file</code></h3>
<p>Logs the contents of a file, using the DEBUG level.</p>
<section id="parameters-88" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-109" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb112"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb112-1" title="1"><span class="ex">logDebugFileContents</span> /tmp/my-file.log</a></code></pre></div>
</section>
</section>
<section id="logdebugresult-successfailure-message" class="level3 function">
<h3>logDebugResult <code>SUCCESS|FAILURE</code> <code>message</code></h3>
<p>Logs given outcome under the “debug” level.</p>
<section id="parameters-89" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>SUCCESS|FAILURE</code></dt>
<dd>The keyword.
</dd>
<dt><code>message</code></dt>
<dd>The outcome to log.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-110" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb113"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb113-1" title="1"><span class="ex">logDebugResult</span> SUCCESS <span class="st">&quot;done&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="logfile-file" class="level3 function">
<h3>logFile <code>file</code></h3>
<p>Logs the contents of a file, as “info”.</p>
<section id="parameters-90" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file with the log messages.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-111" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb114"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb114-1" title="1"><span class="ex">logFile</span> /tmp/my-log.txt<span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="loginfo-message" class="level3 function">
<h3>logInfo <code>message</code></h3>
<p>Logs a message as “info”.</p>
<section id="parameters-91" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>message</code></dt>
<dd>The message to log.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-112" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb115"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb115-1" title="1"><span class="ex">logInfo</span> <span class="st">&quot;Operation in progress&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="loginfofile-file" class="level3 function">
<h3>logInfoFile <code>file</code></h3>
<p>Logs the contents of a file as “info”.</p>
<section id="parameters-92" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file containing the text to log.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-113" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb116"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb116-1" title="1"><span class="ex">logInfoFile</span> /tmp/my-log.txt<span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="loginforesult-successfailure-message" class="level3 function">
<h3>logInfoResult <code>SUCCESS|FAILURE</code> <code>message</code></h3>
<p>Logs the outcome of an operation as “info”</p>
<section id="parameters-93" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>SUCCESS|FAILURE</code></dt>
<dd>The outcome.
</dd>
<dt><code>message</code></dt>
<dd>The message to log.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-114" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb117"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb117-1" title="1"><span class="ex">logInfoResult</span> SUCCESS <span class="st">&quot;done&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="logresult-successfailure-message" class="level3 function">
<h3>logResult <code>SUCCESS|FAILURE</code> <code>message</code></h3>
<p>Logs the outcome of an operation, as “info”.</p>
<section id="parameters-94" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>SUCCESS|FAILURE</code></dt>
<dd>The outcome.
</dd>
<dt><code>message</code></dt>
<dd>The message.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-115" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb118"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb118-1" title="1"><span class="ex">logResult</span> SUCCESS <span class="st">&quot;done&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="logtrace-message" class="level3 function">
<h3>logTrace <code>message</code></h3>
<p>Logs given message under the “trace” level.</p>
<section id="parameters-95" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>message</code></dt>
<dd>The message to log.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-116" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb119"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb119-1" title="1"><span class="ex">logTrace</span> <span class="st">&quot;Operation in progress&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="logtracefile-file" class="level3 function">
<h3>logTraceFile <code>file</code></h3>
<p>Logs the contents of given file, under the “trace” level.</p>
<section id="parameters-96" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file to log.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-117" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb120"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb120-1" title="1"><span class="ex">logTraceFile</span> /tmp/my-log.txt<span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="logtraceresult-keyword-message" class="level3 function">
<h3>logTraceResult <code>keyword</code> <code>message</code></h3>
<p>Logs given text as a log result, under the “trace” level.</p>
<section id="parameters-97" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>keyword</code></dt>
<dd>The keyword.
</dd>
<dt><code>message</code></dt>
<dd>The result message to log.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-118" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb121"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb121-1" title="1"><span class="ex">logTraceResult</span> SUCCESS <span class="st">&quot;Operation completed&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="resolveverbosity" class="level3 function">
<h3>resolveVerbosity</h3>
<p>Retrieves the verbosity flag.</p>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains ‘-vv’ if trace is enabled; ‘-v’ if debug is enabled; empty string otherwise.</p>
<section id="usage-example-119" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb122"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb122-1" title="1"><span class="ex">resolveVerbosity</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="setdebugenabled" class="level3 function">
<h3>setDebugEnabled</h3>
<p>Enables the debug level.</p>
<p>Returns 0/TRUE always.</p>
<section id="usage-example-120" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb123"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb123-1" title="1"><span class="ex">setDebugEnabled</span></a></code></pre></div>
</section>
</section>
<section id="setinfoenabled" class="level3 function">
<h3>setInfoEnabled</h3>
<p>Enables the “info” level.</p>
<p>Returns 0/TRUE always.</p>
<section id="usage-example-121" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb124"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb124-1" title="1"><span class="ex">setInfoEnabled</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="setlogcategory" class="level3 function">
<h3>setLogCategory</h3>
<p>Specifies the log category.</p>
<p>Returns 0/TRUE always.</p>
<section id="usage-example-122" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb125"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb125-1" title="1"><span class="ex">setLogCategory</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="setlogcategorynamespace-namespace" class="level3 function">
<h3>setLogCategoryNamespace <code>namespace</code></h3>
<p>Sets the log category namespace.</p>
<section id="parameters-98" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>namespace</code></dt>
<dd>The namespace.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-123" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb126"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb126-1" title="1"><span class="ex">setLogCategoryNamespace</span> <span class="st">&quot;processing&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="setquietmode-mode" class="level3 function">
<h3>setQuietMode <code>mode</code></h3>
<p>Sets the quiet mode on or off.</p>
<section id="parameters-99" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>mode</code></dt>
<dd>The mode (0/TRUE or 1/FALSE).
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
</section>
<section id="usage-example-124" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb127"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb127-1" title="1"><span class="ex">setQuietMode</span> <span class="va">${TRUE}</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="settraceenabled" class="level3 function">
<h3>setTraceEnabled</h3>
<p>Enables the trace level.</p>
<p>Returns 0/TRUE always.</p>
<section id="usage-example-125" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb128"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb128-1" title="1"><span class="ex">setTraceEnabled</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
</section>
<section id="net" class="level2 module">
<h2>net</h2>
<p>Network functions</p>
<section id="hostisreachable-host" class="level3 function">
<h3>hostIsReachable <code>host</code></h3>
<p>Checks whether given host is reachable.</p>
<section id="parameters-100" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>host</code></dt>
<dd>The host to check.
</dd>
</dl>
<p>Returns 0/TRUE if the host is reachable; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-126" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb129"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb129-1" title="1"><span class="kw">if</span> <span class="ex">hostIsReachable</span> <span class="st">&quot;www.google.com&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;www.google.com is reachable&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrieveiface" class="level3 function">
<h3>retrieveIface</h3>
<p>Retrieves the first network interface.</p>
<p>Returns 0/TRUE if first network interface was found; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the name of the first interface.</p>
<section id="usage-example-127" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb130"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb130-1" title="1"><span class="kw">if</span> <span class="ex">retrieveIface</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Interface candidate: </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrieveifaces" class="level3 function">
<h3>retrieveIfaces</h3>
<p>Retrieves all regular (excluding localhost, VPN, Docker, VirtualBox, etc) network interfaces.</p>
<p>Returns 0/TRUE if network interfaces were found; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the interface names.</p>
<section id="usage-example-128" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb131"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb131-1" title="1"><span class="kw">if</span> <span class="ex">retrieveIfaces</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Interfaces: </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrieveip-interface" class="level3 function">
<h3>retrieveIp <code>interface</code></h3>
<p>Retrieves the IP for given interface.</p>
<section id="parameters-101" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>interface</code></dt>
<dd>The interface name.
</dd>
</dl>
<p>Returns 0/TRUE if the IP is up; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the IP.</p>
</section>
<section id="usage-example-129" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb132"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb132-1" title="1"><span class="kw">if</span> <span class="ex">retrieveIp</span> <span class="st">&quot;eth0&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;IP: </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrieveownip" class="level3 function">
<h3>retrieveOwnIp</h3>
<p>Retrieves the IP of the default interface.</p>
<p>Returns 0/TRUE if the IP can be retrieved; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the IP.</p>
<section id="usage-example-130" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb133"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb133-1" title="1"><span class="kw">if</span> <span class="ex">retrieveOwnIp</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;My IP is </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrievesubnet24-interface" class="level3 function">
<h3>retrieveSubnet24 <code>interface</code></h3>
<p>Retrieves the /24 subnet of given network interface.</p>
<section id="parameters-102" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>interface</code></dt>
<dd>The interface name.
</dd>
</dl>
<p>Returns 0/TRUE if the subnet information is available; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains /24 subnet.</p>
</section>
<section id="usage-example-131" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb134"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb134-1" title="1"><span class="kw">if</span> <span class="ex">retrieveSubnet24</span> <span class="st">&quot;eth0&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;The /24 subnet for eth0 is </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
</section>
<section id="package" class="level2 module">
<h2>package</h2>
<p>Package functions.</p>
<section id="isinstalled-program" class="level3 function">
<h3>isInstalled <code>program</code></h3>
<p>Checks a required package is installed.</p>
<section id="parameters-103" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>program</code></dt>
<dd>The program name.
</dd>
</dl>
<p>Returns 0/TRUE if given program is available in the PATH; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-132" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb135"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb135-1" title="1"><span class="kw">if</span> ! <span class="ex">isInstalled</span> <span class="st">&quot;ifconfig&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;ifconfig is not available&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
</section>
<section id="ssh" class="level2 module">
<h2>ssh</h2>
<p>SSH-related functions.</p>
<section id="remotesshcommand-user-server-command" class="level3 function">
<h3>remoteSshCommand <code>user</code> <code>server</code> <code>command</code></h3>
<p>Runs a command in a remote server, via SSH.</p>
<section id="parameters-104" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>user</code></dt>
<dd>The user name.
</dd>
<dt><code>server</code></dt>
<dd>The remote server.
</dd>
<dt><code>command</code></dt>
<dd>The command to run.
</dd>
</dl>
<p>Returns the result code of the command.</p>
<p>If the function returns 0/TRUE; then the variable RESULT contains the output of the command.</p>
</section>
<section id="usage-example-133" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb136"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb136-1" title="1"><span class="kw">if</span> <span class="ex">remoteSshCommand</span> user ssh.example.com <span class="st">&quot;who&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Remote logged users: </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="remotesshcommandpipe-user-server-command-previouspipe" class="level3 function">
<h3>remoteSshCommandPipe <code>user</code> <code>server</code> <code>command</code> <code>previousPipe</code></h3>
<p>Pipes through a command in a remote server, via SSH.</p>
<section id="parameters-105" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>user</code></dt>
<dd>The user name.
</dd>
<dt><code>server</code></dt>
<dd>The remote server.
</dd>
<dt><code>command</code></dt>
<dd>The command to run in the remote server.
</dd>
<dt><code>previousPipe</code></dt>
<dd>The pipe to read from, which is piped to the remote command.
</dd>
</dl>
<p>Returns the result code of the remote command.</p>
<p>If the function returns 0/TRUE; then the variable RESULT contains the output of the command.</p>
</section>
<section id="usage-example-134" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb137"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb137-1" title="1"><span class="kw">if</span> <span class="ex">remoteSshCommandPipe</span> user ssh.example.com <span class="st">&quot;tar -cvfz - /www&quot;</span> <span class="st">&quot;cat &gt; www.tar.gz&quot;</span></a></code></pre></div>
</section>
</section>
</section>
<section id="stdlib" class="level2 module">
<h2>stdlib</h2>
<p>Standard, general-purpose functions.</p>
<section id="areequal-first-second" class="level3 function">
<h3>areEqual <code>first</code> <code>second</code></h3>
<p>Checks whether given parameters are equal.</p>
<section id="parameters-106" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>first</code></dt>
<dd>The first value.
</dd>
<dt><code>second</code></dt>
<dd>The second value.
</dd>
</dl>
<p>Returns 0/TRUE if both values are equal; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-135" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb138"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb138-1" title="1"><span class="kw">if</span> <span class="ex">areEqual</span> <span class="st">&quot;</span><span class="va">${param}</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">${expected}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;param equals expected (</span><span class="va">${param}</span><span class="st">)&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="arenotequal-first-second" class="level3 function">
<h3>areNotEqual <code>first</code> <code>second</code></h3>
<p>Checks whether given parameters are not equal.</p>
<section id="parameters-107" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>first</code></dt>
<dd>The first value.
</dd>
<dt><code>second</code></dt>
<dd>The second value.
</dd>
</dl>
<p>Returns 0/TRUE if both values aren’t equal; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-136" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb139"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb139-1" title="1"><span class="kw">if</span> <span class="ex">areEqual</span> <span class="st">&quot;</span><span class="va">${param}</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">${expected}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;param (</span><span class="va">${param}</span><span class="st">) and expected </span><span class="va">${expected}</span><span class="st"> are not equal&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="isdefined-var" class="level3 function">
<h3>isDefined <code>var</code></h3>
<p>Checks whether given value is defined.</p>
<section id="parameters-108" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>var</code></dt>
<dd>The variable to check.
</dd>
</dl>
<p>Returns 0/TRUE if the value is empty; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-137" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb140"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb140-1" title="1"><span class="kw">if</span> <span class="ex">isDefined</span> <span class="st">&quot;</span><span class="va">${MYVAR}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;MYVAR is defined&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="isempty-value" class="level3 function">
<h3>isEmpty <code>value</code></h3>
<p>Checks whether given value is empty.</p>
<section id="parameters-109" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>value</code></dt>
<dd>The value to check.
</dd>
</dl>
<p>Returns 0/TRUE if the value is empty; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-138" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb141"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb141-1" title="1"><span class="kw">if</span> <span class="ex">isEmpty</span> <span class="st">&quot;</span><span class="va">${MYVAR}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;MYVAR is empty&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="isfalse-value" class="level3 function">
<h3>isFalse <code>value</code></h3>
<p>Checks whether given value is false.</p>
<section id="parameters-110" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>value</code></dt>
<dd>The value.
</dd>
</dl>
<p>Returns 0/TRUE if the value is false; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-139" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb142"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb142-1" title="1"><span class="kw">if</span> <span class="ex">isFalse</span> <span class="st">&quot;</span><span class="va">${MYVAR}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="isfunctiondefined-functionname" class="level3 function">
<h3>isFunctionDefined <code>functionName</code></h3>
<p>Checks if a given function is defined.</p>
<section id="parameters-111" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>functionName</code></dt>
<dd>The function name.
</dd>
</dl>
<p>Returns 0/TRUE if the function is defined; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-140" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb143"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb143-1" title="1"><span class="kw">if</span> <span class="ex">functionDefined</span> <span class="st">&quot;readFile&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">readFile</span> ...<span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="isnotempty-value" class="level3 function">
<h3>isNotEmpty <code>value</code></h3>
<p>Checks whether given value is not empty.</p>
<section id="parameters-112" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>value</code></dt>
<dd>The value to check.
</dd>
</dl>
<p>Returns 0/TRUE if the value is not empty; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-141" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb144"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb144-1" title="1"><span class="kw">if</span> <span class="ex">isNotEmpty</span> <span class="st">&quot;</span><span class="va">${MYVAR}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;MYVAR is not empty&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="isnotzero-value" class="level3 function">
<h3>isNotZero <code>value</code></h3>
<p>Checks whether given value is not zero.</p>
<section id="parameters-113" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>value</code></dt>
<dd>The value.
</dd>
</dl>
<p>Returns 0/TRUE if the value is zero; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-142" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb145"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb145-1" title="1"><span class="kw">if</span> <span class="ex">isNotZero</span> <span class="st">&quot;</span><span class="va">${MYVAR}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="istrue-value" class="level3 function">
<h3>isTrue <code>value</code></h3>
<p>Checks whether given value is true.</p>
<section id="parameters-114" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>value</code></dt>
<dd>The value.
</dd>
</dl>
<p>Returns 0/TRUE if the value is true; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-143" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb146"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb146-1" title="1"><span class="kw">if</span> <span class="ex">isTrue</span> <span class="st">&quot;</span><span class="va">${MYVAR}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="isvariabledefined-var" class="level3 function">
<h3>isVariableDefined <code>var</code></h3>
<p>Checks whether given variable is defined.</p>
<section id="parameters-115" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>var</code></dt>
<dd>The variable value to check.
</dd>
</dl>
<p>Returns 0/TRUE if the value is empty; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-144" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb147"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb147-1" title="1"><span class="kw">if</span> <span class="ex">isDefined</span> <span class="st">&quot;</span><span class="va">${MYVAR}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;MYVAR is defined&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="iszero-value" class="level3 function">
<h3>isZero <code>value</code></h3>
<p>Checks whether given value is zero.</p>
<section id="parameters-116" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>value</code></dt>
<dd>The value.
</dd>
</dl>
<p>Returns 0/TRUE: if the value is zero; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-145" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb148"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb148-1" title="1"><span class="kw">if</span> <span class="ex">isZero</span> <span class="st">&quot;</span><span class="va">${MYVAR}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
</section>
<section id="string" class="level2 module">
<h2>string</h2>
<p>String-related functions.</p>
<section id="contains-text-substring" class="level3 function">
<h3>contains <code>text</code> <code>substring</code></h3>
<p>Checks whether the first parameter contains the second value.</p>
<section id="parameters-117" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>text</code></dt>
<dd>The text.
</dd>
<dt><code>substring</code></dt>
<dd>The substring to check.
</dd>
</dl>
<p>Returns 0/TRUE if the text contains the substring; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-146" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb149"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb149-1" title="1"><span class="kw">if</span> <span class="ex">contains</span> <span class="st">&quot;</span><span class="va">${text}</span><span class="st">&quot;</span> <span class="st">&quot;b&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${text}</span><span class="st"> contains b&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="endswith-text-substring" class="level3 function">
<h3>endsWith <code>text</code> <code>substring</code></h3>
<p>Checks whether the first parameter ends with the second value.</p>
<section id="parameters-118" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>text</code></dt>
<dd>The text.
</dd>
<dt><code>substring</code></dt>
<dd>The substring to check.
</dd>
</dl>
<p>Returns 0/TRUE if the text ends with the substring; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-147" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb150"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb150-1" title="1"><span class="kw">if</span> <span class="ex">endsWith</span> <span class="st">&quot;</span><span class="va">${text}</span><span class="st">&quot;</span> <span class="st">&quot;c&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${text}</span><span class="st"> ends with c&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="normalize-text" class="level3 function">
<h3>normalize <code>text</code></h3>
<p>Normalizes given string: converts non-alphanumeric characters to underscore.</p>
<section id="parameters-119" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>text</code></dt>
<dd>The text to normalize.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the normalized string.</p>
</section>
<section id="usage-example-148" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb151"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb151-1" title="1"><span class="ex">normalize</span> <span class="st">&quot;a_b.C&quot;</span> <span class="co"># returns &quot;a_b_C&quot;;</span></a></code></pre></div>
</section>
</section>
<section id="normalizeuppercase-string" class="level3 function">
<h3>normalizeUppercase <code>string</code></h3>
<p>Normalizes given string: converts non-alphanumeric characters to underscore, and converts it to upper case.</p>
<section id="parameters-120" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>string</code></dt>
<dd>The string to convert.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the normalized string.</p>
</section>
<section id="usage-example-149" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb152"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb152-1" title="1"><span class="ex">normalize</span> <span class="st">&quot;a_b.C&quot;</span> <span class="co"># returns &quot;A_B_C&quot;;</span></a></code></pre></div>
</section>
</section>
<section id="removeprefix-text-prefix" class="level3 function">
<h3>removePrefix <code>text</code> <code>prefix</code></h3>
<p>Removes the prefix of given string.</p>
<section id="parameters-121" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>text</code></dt>
<dd>The string to process.
</dd>
<dt><code>prefix</code></dt>
<dd>The prefix to remove.
</dd>
</dl>
<p>Returns 0/TRUE if the prefix was removed; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the string without the prefix.</p>
</section>
<section id="usage-example-150" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb153"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb153-1" title="1"><span class="kw">if</span> <span class="ex">removePrefix</span> <span class="st">&quot;</span><span class="va">${_text}</span><span class="st">&quot;</span> <span class="st">&quot;--*&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${_text}</span><span class="st"> -&gt; </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="removesuffix-text-suffix" class="level3 function">
<h3>removeSuffix <code>text</code> <code>suffix</code></h3>
<p>Removes the suffix of given string.</p>
<section id="parameters-122" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>text</code></dt>
<dd>The string to process.
</dd>
<dt><code>suffix</code></dt>
<dd>The suffix to remove.
</dd>
</dl>
<p>Returns 0/TRUE if the suffix was removed; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the string without the suffix.</p>
</section>
<section id="usage-example-151" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb154"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb154-1" title="1"><span class="kw">if</span> <span class="ex">removeSuffix</span> <span class="st">&quot;</span><span class="va">${_text}</span><span class="st">&quot;</span> <span class="st">&quot;-*&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${_text}</span><span class="st"> -&gt; </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="replacenleftmosttokens-text-newtoken-n-separator" class="level3 function">
<h3>replaceNLeftmostTokens <code>text</code> <code>newToken</code> <code>n</code> <code>separator</code></h3>
<p>Replaces the n leftmost tokens from given text.</p>
<section id="parameters-123" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>text</code></dt>
<dd>The text to process.
</dd>
<dt><code>newToken</code></dt>
<dd>The token replacement.
</dd>
<dt><code>n</code></dt>
<dd>The number of tokens to replace.
</dd>
<dt><code>separator</code></dt>
<dd>The separator.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the new text.</p>
</section>
<section id="usage-example-152" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb155"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb155-1" title="1"><span class="ex">replaceNLeftmostTokens</span> <span class="st">&quot;a a a b b&quot;</span> <span class="st">&quot;b&quot;</span> 3 <span class="st">&quot; &quot;</span> <span class="co"># &quot;b b b b b&quot;</span></a></code></pre></div>
</section>
</section>
<section id="replacenrightmosttokens-text-newtoken-n-separator" class="level3 function">
<h3>replaceNRightmostTokens <code>text</code> <code>newToken</code> <code>n</code> <code>separator</code></h3>
<p>replaces the n rightmost tokens from given text.</p>
<section id="parameters-124" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>text</code></dt>
<dd>the text to process.
</dd>
<dt><code>newtoken</code></dt>
<dd>the token replacement.
</dd>
<dt><code>n</code></dt>
<dd>the number of tokens to replace.
</dd>
<dt><code>separator</code></dt>
<dd>the separator.
</dd>
</dl>
<p>returns 0/true always.</p>
<p>the variable result contains the new text.</p>
</section>
<section id="usage-example-153" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb156"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb156-1" title="1"><span class="ex">replaceNRightmostTokens</span> <span class="st">&quot;a a a b b&quot;</span> <span class="st">&quot;a&quot;</span> 2 <span class="st">&quot; &quot;</span> <span class="co"># &quot;a a a a a&quot;</span></a></code></pre></div>
</section>
</section>
<section id="startswith-text-substring" class="level3 function">
<h3>startsWith <code>text</code> <code>substring</code></h3>
<p>Checks whether the first parameter starts with the second value.</p>
<section id="parameters-125" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>text</code></dt>
<dd>The text.
</dd>
<dt><code>substring</code></dt>
<dd>The substring to check.
</dd>
</dl>
<p>Returns 0/TRUE if the text starts with the substring; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-154" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb157"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb157-1" title="1"><span class="kw">if</span> <span class="ex">startsWith</span> <span class="st">&quot;</span><span class="va">${text}</span><span class="st">&quot;</span> <span class="st">&quot;a&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${text}</span><span class="st"> starts with a&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="tolower-text" class="level3 function">
<h3>toLower <code>text</code></h3>
<p>Converts given string to lower case.</p>
<section id="parameters-126" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>text</code></dt>
<dd>The string to convert.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the converted string.</p>
</section>
<section id="usage-example-155" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb158"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb158-1" title="1"><span class="bu">local</span> <span class="va">_text=</span><span class="st">&quot;ABC&quot;</span>;</a>
<a class="sourceLine" id="cb158-2" title="2"><span class="ex">toLower</span> <span class="st">&quot;</span><span class="va">${_text}</span><span class="st">&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb158-3" title="3"><span class="bu">local</span> <span class="va">_lowerCase=</span><span class="st">&quot;</span><span class="va">${RESULT}</span><span class="st">&quot;</span>;</a></code></pre></div>
</section>
</section>
<section id="toupper-text" class="level3 function">
<h3>toUpper <code>text</code></h3>
<p>Converts given string to upper case.</p>
<section id="parameters-127" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>text</code></dt>
<dd>The string to convert.
</dd>
</dl>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the string in upper case.</p>
</section>
<section id="usage-example-156" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb159"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb159-1" title="1"><span class="bu">local</span> <span class="va">_text=</span><span class="st">&quot;abc&quot;</span>;</a>
<a class="sourceLine" id="cb159-2" title="2"><span class="ex">toUpper</span> <span class="st">&quot;</span><span class="va">${_text}</span><span class="st">&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb159-3" title="3"><span class="bu">local</span> <span class="va">_upcased=</span><span class="st">&quot;</span><span class="va">${RESULT}</span><span class="st">&quot;</span>;</a></code></pre></div>
</section>
</section>
</section>
<section id="sudo" class="level2 module">
<h2>sudo</h2>
<p>sudo-related functions.</p>
<section id="checkpasswordlesssudo" class="level3 function">
<h3>checkPasswordlessSudo</h3>
<p>Checks the current user can run sudo commands without password.</p>
<p>Returns 0/TRUE if the current user can run sudo commands without password; 1/FALSE otherwise.</p>
<section id="usage-example-157" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb160"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb160-1" title="1"><span class="kw">if</span> <span class="ex">checkPasswordlessSudo</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
</section>
<section id="term" class="level2 module">
<h2>term</h2>
<p>Terminal-related functions</p>
<section id="gettermwidth" class="level3 function">
<h3>getTermWidth</h3>
<p>Retrieves the width of the term.</p>
<p>Returns 0/TRUE if the term width was retrieved; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the term width.</p>
<section id="usage-example-158" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb161"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb161-1" title="1"><span class="kw">if</span> <span class="ex">getTermWidth</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;term width -&gt; </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="gettermwidthforterm-term" class="level3 function">
<h3>getTermWidthForTerm <code>term</code></h3>
<p>Retrieves the width of the term.</p>
<section id="parameters-128" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>term</code></dt>
<dd>the TERM value.
</dd>
</dl>
<p>Returns 0/TRUE if the term width was retrieved; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the term width.</p>
</section>
<section id="usage-example-159" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb162"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb162-1" title="1"><span class="kw">if</span> <span class="ex">getTermWidthForTerm</span> <span class="st">&quot;</span><span class="va">${TERM}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrieveterm" class="level3 function">
<h3>retrieveTERM</h3>
<p>Retrieves the TERM variable</p>
<p>Returns 0/TRUE always.</p>
<p>The variable RESULT contains the TERM variable.</p>
<section id="usage-example-160" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb163"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb163-1" title="1"><span class="ex">retrieveTERM</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb163-2" title="2"><span class="bu">echo</span> <span class="st">&quot;TERM -&gt; </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
</section>
<section id="url" class="level2 module">
<h2>url</h2>
<p>URL-related functions.</p>
<section id="urlencode-url" class="level3 function">
<h3>urlEncode <code>url</code></h3>
<p>Encodes given url.</p>
<section id="parameters-129" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>url</code></dt>
<dd>The url to encode.
</dd>
</dl>
<p>Prints the encoded url to stdout.</p>
</section>
<section id="usage-example-161" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb164"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb164-1" title="1"><span class="bu">local</span> <span class="va">encoded=</span><span class="st">&quot;</span><span class="va">$(</span><span class="ex">urlEncode</span> <span class="st">&#39;http://www.example.com&#39;</span><span class="va">)</span><span class="st">&quot;</span>;</a>
<a class="sourceLine" id="cb164-2" title="2"><span class="bu">echo</span> <span class="st">&quot;URL encoded: </span><span class="va">${encoded}</span><span class="st">&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
</section>
<section id="usage" class="level2 module">
<h2>usage</h2>
<p>Functions in charge of printing how to run the script.</p>
<section id="printhelp" class="level3 function">
<h3>printHelp</h3>
<p>Prints the help message.</p>
<p>Returns 0/TRUE always.</p>
<section id="usage-example-162" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb165"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb165-1" title="1"><span class="ex">printHelp</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="printusage" class="level3 function">
<h3>printUsage</h3>
<p>Prints the usage message.</p>
<p>Returns 0/TRUE always.</p>
<section id="usage-example-163" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb166"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb166-1" title="1"><span class="ex">printUsage</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
</section>
<section id="user" class="level2 module">
<h2>user</h2>
<p>Functions related to user and groups.</p>
<section id="addusertogroup-username-groupname" class="level3 function">
<h3>addUserToGroup <code>userName</code> <code>groupName</code></h3>
<p>Adds given user to a group.</p>
<section id="parameters-130" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>userName</code></dt>
<dd>The user name.
</dd>
<dt><code>groupName</code></dt>
<dd>The group name.
</dd>
</dl>
<p>Returns 0/TRUE if the user gets added to the group successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-164" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb167"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb167-1" title="1"><span class="kw">if</span> <span class="ex">addUserToGroup</span> guest users<span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb167-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;User guest added to group users&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb167-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="creategroup-groupname-groupid" class="level3 function">
<h3>createGroup <code>groupName</code> <code>groupId?</code></h3>
<p>Creates a new group.</p>
<section id="parameters-131" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>groupName</code></dt>
<dd>The group name.
</dd>
<dt><code>groupId</code></dt>
<dd>The group id. Optional.
</dd>
</dl>
<p>Returns 0/TRUE if the group gets created successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-165" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb168"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb168-1" title="1"><span class="kw">if</span> <span class="ex">createGroup</span> <span class="st">&quot;fakegroup&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb168-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;fakegroup created successfully&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb168-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="createuser-username" class="level3 function">
<h3>createUser <code>userName</code></h3>
<p>Creates a new user.</p>
<section id="parameters-132" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>userName</code></dt>
<dd>The user name.
</dd>
</dl>
<p>Returns 0/TRUE if the user gets created successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-166" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb169"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb169-1" title="1"><span class="kw">if</span> <span class="ex">createUser</span> <span class="st">&quot;fakeuser&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb169-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;fakeuser created successfully&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb169-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="deletegroup-groupname" class="level3 function">
<h3>deleteGroup <code>groupName</code></h3>
<p>Deletes given group.</p>
<section id="parameters-133" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>groupName</code></dt>
<dd>The group name.
</dd>
</dl>
<p>Returns 0/TRUE if the group is removed successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-167" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb170"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb170-1" title="1"><span class="kw">if</span> <span class="ex">deleteGroup</span> <span class="st">&quot;fakegroup&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb170-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;fakegroup deleted successfully&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb170-3" title="3"><span class="ex">afi</span></a></code></pre></div>
</section>
</section>
<section id="deleteuser-username" class="level3 function">
<h3>deleteUser <code>userName</code></h3>
<p>Deletes given user.</p>
<section id="parameters-134" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>userName</code></dt>
<dd>The user name.
</dd>
</dl>
<p>Returns 0/TRUE if the user is removed successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-168" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb171"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb171-1" title="1"><span class="kw">if</span> <span class="ex">deleteUser</span> <span class="st">&quot;fakeuser&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb171-2" title="2">  <span class="bu">echo</span> <span class="st">&quot;fakeuser deleted successfully&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb171-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="gidalreadyexists-gid" class="level3 function">
<h3>gidAlreadyExists <code>gid</code></h3>
<p>Checks whether given gid already exists.</p>
<section id="parameters-135" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>gid</code></dt>
<dd>The group id.
</dd>
</dl>
<p>Returns 0/TRUE if it exists; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-169" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb172"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb172-1" title="1"><span class="kw">if</span> <span class="ex">gidAlreadyExists</span> 103<span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="groupalreadyexists-group" class="level3 function">
<h3>groupAlreadyExists <code>group</code></h3>
<p>Checks whether given group already exists.</p>
<section id="parameters-136" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>group</code></dt>
<dd>The group name.
</dd>
</dl>
<p>Returns 0/TRUE if it exists; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-170" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb173"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb173-1" title="1"><span class="kw">if</span> <span class="ex">groupAlreadyExists</span> users<span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="resolvecommandforuser-username-command" class="level3 function">
<h3>resolveCommandForUser <code>userName</code> <code>command</code></h3>
<p>Resolves the path of a command for given user.</p>
<section id="parameters-137" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>userName</code></dt>
<dd>The user.
</dd>
<dt><code>command</code></dt>
<dd>The command.
</dd>
</dl>
<p>Returns 0/TRUE if the command gets resolved to a path for given user; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the path of ‘command’ for given user.</p>
</section>
<section id="usage-example-171" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb174"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb174-1" title="1"><span class="kw">if</span> <span class="ex">resolveCommandForUser</span> <span class="st">&quot;</span><span class="va">${SERVICE_USER}</span><span class="st">&quot;</span> <span class="st">&quot;gradle&quot;</span><span class="kw">;</span> <span class="kw">then</span></a>
<a class="sourceLine" id="cb174-2" title="2">  <span class="bu">local</span> <span class="va">_command=</span><span class="st">&quot;</span><span class="va">${RESULT}</span><span class="st">&quot;</span>;</a>
<a class="sourceLine" id="cb174-3" title="3"><span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrievegidfromgroup-group" class="level3 function">
<h3>retrieveGidFromGroup <code>group</code></h3>
<p>Retrieves the id of a given group.</p>
<section id="parameters-138" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>group</code></dt>
<dd>The group name.
</dd>
</dl>
<p>Returns 0/TRUE if the group was retrieved; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the group id.</p>
</section>
<section id="usage-example-172" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb175"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb175-1" title="1"><span class="ex">retrieveGidFromGroup</span> <span class="st">&quot;admin&quot;</span><span class="kw">;</span></a>
<a class="sourceLine" id="cb175-2" title="2"><span class="bu">echo</span> <span class="st">&quot;The id of group admin is </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="retrievegroupfromgid-group" class="level3 function">
<h3>retrieveGroupFromGid <code>group</code></h3>
<p>Retrieves the group id of given group.</p>
<section id="parameters-139" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>group</code></dt>
<dd>The group name.
</dd>
</dl>
<p>Returns 0/TRUE if the gid is processed successfully; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the group id.</p>
</section>
<section id="usage-example-173" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb176"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb176-1" title="1"><span class="kw">if</span> <span class="ex">retrieveGroupFromGid</span> <span class="st">&quot;100&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;The name of group 1 is </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrieveownergid-path" class="level3 function">
<h3>retrieveOwnerGid <code>path</code></h3>
<p>Retrieves the id of the owner group of given file or folder.</p>
<section id="parameters-140" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>path</code></dt>
<dd>The file or folder.
</dd>
</dl>
<p>Returns 0/TRUE if the owner information is found; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the id of the group that owns the file or folder.</p>
</section>
<section id="usage-example-174" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb177"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb177-1" title="1"><span class="kw">if</span> <span class="ex">retrieveOwnerGid</span> /tmp<span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;The id of the group of /tmp is </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrieveowneruid-path" class="level3 function">
<h3>retrieveOwnerUid <code>path</code></h3>
<p>Retrieves the uid of the owner user of given file or folder.</p>
<section id="parameters-141" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>path</code></dt>
<dd>The file or folder.
</dd>
</dl>
<p>Returns 0/TRUE if the owner information is found; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the id of the user that owns the file or folder.</p>
</section>
<section id="usage-example-175" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb178"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb178-1" title="1"><span class="kw">if</span> <span class="ex">retrieveOwnerUid</span> /tmp<span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;The id of the owner of /tmp is </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrieveuidfromuser-user" class="level3 function">
<h3>retrieveUidFromUser <code>user</code></h3>
<p>Retrieves the id of a given user.</p>
<section id="parameters-142" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>user</code></dt>
<dd>The user name.
</dd>
</dl>
<p>Returns 0/TRUE if the user is found; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the user id.</p>
</section>
<section id="usage-example-176" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb179"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb179-1" title="1"><span class="kw">if</span> <span class="ex">retrieveUidFromUser</span> <span class="st">&quot;root&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="st">&quot;The id of user root is </span><span class="va">${RESULT}</span><span class="st">&quot;</span>; <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrieveuserfromuid-user" class="level3 function">
<h3>retrieveUserFromUid <code>user</code></h3>
<p>Retrieves the user id of given user.</p>
<section id="parameters-143" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>user</code></dt>
<dd>The user name.
</dd>
</dl>
<p>Returns 0/TRUE if the user is found; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the user id.</p>
</section>
<section id="usage-example-177" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb180"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb180-1" title="1"><span class="kw">if</span> <span class="ex">retrieveUserFromUid</span> <span class="st">&quot;1&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;The name of user 1 is </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="uidalreadyexists-uid" class="level3 function">
<h3>uidAlreadyExists <code>uid</code></h3>
<p>Checks whether given uid already exists.</p>
<section id="parameters-144" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>uid</code></dt>
<dd>The user id.
</dd>
</dl>
<p>Returns 0/TRUE if it exists; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-178" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb181"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb181-1" title="1"><span class="kw">if</span> <span class="ex">uidAlreadyExists</span> 1<span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="updategroupgid-groupname-gid" class="level3 function">
<h3>updateGroupGid <code>groupName</code> <code>gid</code></h3>
<p>Updates the gid of the group.</p>
<section id="parameters-145" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>groupName</code></dt>
<dd>The group name.
</dd>
<dt><code>gid</code></dt>
<dd>The group id.
</dd>
</dl>
<p>Returns 0/TRUE if the group’s gid is updated successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-179" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb182"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb182-1" title="1"><span class="kw">if</span> <span class="ex">updateGroupGid</span> <span class="st">&quot;guests&quot;</span> 103<span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;guests&#39; gid is now 103&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="updateusergid-username-gid" class="level3 function">
<h3>updateUserGid <code>userName</code> <code>gid</code></h3>
<p>Updates the gid of the user.</p>
<section id="parameters-146" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>userName</code></dt>
<dd>The user.
</dd>
<dt><code>gid</code></dt>
<dd>The group id.
</dd>
</dl>
<p>Returns 0/TRUE if the user’s gid is updated successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-180" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb183"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb183-1" title="1"><span class="kw">if</span> <span class="ex">updateUserGid</span> <span class="st">&quot;guest&quot;</span> 103<span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Guest&#39;s gid is now 103&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="updateuseruid-username-uid" class="level3 function">
<h3>updateUserUid <code>userName</code> <code>uid</code></h3>
<p>Updates the uid of the user.</p>
<section id="parameters-147" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>userName</code></dt>
<dd>The user.
</dd>
<dt><code>uid</code></dt>
<dd>The uid.
</dd>
</dl>
<p>Returns 0/TRUE if the user’s uid is updated successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-181" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb184"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb184-1" title="1"><span class="kw">if</span> <span class="ex">updateUserUid</span> <span class="st">&quot;guest&quot;</span> 1001<span class="kw">;</span> <span class="kw">then</span> <span class="st">&quot;User guest&#39;s uid is now 1001&quot;</span>; <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="useralreadyexists-user" class="level3 function">
<h3>userAlreadyExists <code>user</code></h3>
<p>Checks whether given user already exists.</p>
<section id="parameters-148" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>user</code></dt>
<dd>The user name.
</dd>
</dl>
<p>Returns 0/TRUE if it exists; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-182" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb185"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb185-1" title="1"><span class="kw">if</span> <span class="ex">userAlreadyExists</span> guest<span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
<hr />
</section>
</section>
</section>
</section>
<section id="api-reference-ext" class="level1">
<h1>API Reference (ext)</h1>
<section id="concourse" class="level2 module">
<h2>concourse</h2>
<p>ConcourseCI-related functions.</p>
<section id="flylogin-target-url" class="level3 function">
<h3>flyLogin <code>target</code> <code>url</code></h3>
<p>Runs a fly login command.</p>
<section id="parameters-149" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>target</code></dt>
<dd>The Concourse target.
</dd>
<dt><code>url</code></dt>
<dd>The Concourse url.
</dd>
</dl>
<p>Returns 0/TRUE if the command succeeds; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-183" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb186"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb186-1" title="1"><span class="kw">if</span> <span class="ex">flyLogin</span> ci http://concourse:8080<span class="kw">;</span> <span class="kw">then</span> <span class="ex">...</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="runflycommand-yyyesyesnnnono-command-arg" class="level3 function">
<h3>runFlyCommand <code>y|Y|yes|YES|n|N|no|NO</code> <code>command</code> <code>arg*</code></h3>
<p>Runs a fly command.</p>
<section id="parameters-150" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>y|Y|yes|YES|n|N|no|NO-&gt; 1</code></dt>
<dd>Whether to assume ‘y’ or ‘n’ to any question.
</dd>
<dt><code>command</code></dt>
<dd>The command to run.
</dd>
<dt><code>arg</code></dt>
<dd>The command arguments. Optional.
</dd>
</dl>
<p>Returns 0/TRUE if the command succeeds; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-184" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb187"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb187-1" title="1"><span class="kw">if</span> <span class="ex">runFlyCommand</span> y -t ci set-pipeline -p main<span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;fly -t ci set-pipeline -p main -&gt; </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
</section>
<section id="docker" class="level2 module">
<h2>docker</h2>
<p>Docker-related functions.</p>
<section id="connectdockercontainertonetwork-container-network" class="level3 function">
<h3>connectDockerContainerToNetwork <code>container</code> <code>network</code></h3>
<p>Connects a container to given network.</p>
<section id="parameters-151" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>container</code></dt>
<dd>The Docker container.
</dd>
<dt><code>network</code></dt>
<dd>The network.
</dd>
</dl>
<p>Returns 0/TRUE if the container was connected to the network; 1/FALSE otherwise.</p>
<p>The variable RESULT contains the output of the command, either in case of success or failure.</p>
</section>
<section id="usage-example-185" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb188"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb188-1" title="1"><span class="kw">if</span> <span class="ex">connectDockerContainerToNetwork</span> container my_network<span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Container added to my_network network&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="copytodockercontainer-file-container-containerfolder" class="level3 function">
<h3>copyToDockerContainer <code>file</code> <code>container</code> <code>containerFolder</code></h3>
<p>Copies a file to a Docker container.</p>
<section id="parameters-152" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file to copy.
</dd>
<dt><code>container</code></dt>
<dd>The container name.
</dd>
<dt><code>containerFolder</code></dt>
<dd>The target location.
</dd>
</dl>
<p>Returns 0/TRUE if the operation succeeds; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-186" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb189"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb189-1" title="1"><span class="kw">if</span> <span class="ex">copyToDockerContainer</span> <span class="st">&quot;my-file&quot;</span> <span class="st">&quot;container&quot;</span> <span class="st">&quot;/tmp&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;my-file copied to container:/tmp successfully&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="createdockernetwork-network" class="level3 function">
<h3>createDockerNetwork <code>network</code></h3>
<p>Creates a Docker network.</p>
<section id="parameters-153" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>network</code></dt>
<dd>The network name.
</dd>
</dl>
<p>Returns 0/TRUE if the network was created successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-187" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb190"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb190-1" title="1"><span class="kw">if</span> <span class="ex">createDockerNetwork</span> bridge<span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;bridge network created&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="dockercommand-command-args" class="level3 function">
<h3>dockerCommand <code>command</code> <code>args*</code></h3>
<p>Runs a Docker command.</p>
<section id="parameters-154" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>command</code></dt>
<dd>The Docker command.
</dd>
<dt><code>args</code></dt>
<dd>The command arguments (if any).
</dd>
</dl>
<p>Returns 0/TRUE if the operation succeeds; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-188" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb191"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb191-1" title="1"><span class="kw">if</span> <span class="ex">dockerCommand</span> create -v /config --name config busybox<span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;config container created successfully&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="dockercontainerexists-container" class="level3 function">
<h3>dockerContainerExists <code>container</code></h3>
<p>Checks if given container exists.</p>
<section id="parameters-155" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>container</code></dt>
<dd>The container name.
</dd>
</dl>
<p>Returns 0/TRUE if the container exists; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the hash of the container.</p>
</section>
<section id="usage-example-189" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb192"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb192-1" title="1"><span class="kw">if</span> <span class="ex">dockerContainerExists</span> <span class="st">&quot;config&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;&#39;config&#39; container already exists (</span><span class="va">${RESULT}</span><span class="st">)&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="dockernetworkexists-network" class="level3 function">
<h3>dockerNetworkExists <code>network</code></h3>
<p>Checks if given network exists.</p>
<section id="parameters-156" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>network</code></dt>
<dd>The network name.
</dd>
</dl>
<p>Returns 0/TRUE if the network exists; 0/${FALSE} otherwise.</p>
</section>
<section id="usage-example-190" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb193"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb193-1" title="1"><span class="kw">if</span> <span class="ex">dockerNetworkExists</span> <span class="st">&quot;bridge&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;&#39;bridge&#39; network already exists&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="isdockercontainerrunning-container" class="level3 function">
<h3>isDockerContainerRunning <code>container</code></h3>
<p>Checks if a container is running.</p>
<section id="parameters-157" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>fun</code></dt>
<dd>the container name.
</dd>
</dl>
<p>Returns 0/TRUE if the container is running; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-191" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb194"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb194-1" title="1"><span class="kw">if</span> <span class="ex">isDockerContainerRunning</span> mysql<span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;mysql is running&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="removedockernetwork-network" class="level3 function">
<h3>removeDockerNetwork <code>network</code></h3>
<p>Removes a Docker network.</p>
<section id="parameters-158" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>network</code></dt>
<dd>The Docker network.
</dd>
</dl>
<p>Returns 0/TRUE if the network was deleted successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-192" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb195"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb195-1" title="1"><span class="kw">if</span> <span class="ex">removeDockerNetwork</span> bridge<span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;bridge network removed&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrievedockercontainerstatus-container" class="level3 function">
<h3>retrieveDockerContainerStatus <code>container</code></h3>
<p>Retrieves the status of given container.</p>
<section id="parameters-159" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>container</code></dt>
<dd>The container name.
</dd>
</dl>
<p>Returns 0/TRUE if the container status could be obtained; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the status.</p>
</section>
<section id="usage-example-193" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb196"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb196-1" title="1"><span class="kw">if</span> <span class="ex">retrieveDockerContainerStatus</span> mysql<span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;mysql&#39;s status is </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
</section>
<section id="git" class="level2 module">
<h2>git</h2>
<p>git-related functions</p>
<section id="retrievegitbranch" class="level3 function">
<h3>retrieveGitBranch</h3>
<p>Finds out the current branch.</p>
<p>Returns 0/TRUE if the branch could be retrieved; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the name of the branch.</p>
<section id="usage-example-194" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb197"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb197-1" title="1"><span class="kw">if</span> <span class="ex">findOutCurrentBranch</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;The current branch is </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrievegitrepositoryurl" class="level3 function">
<h3>retrieveGitRepositoryUrl</h3>
<p>Finds out the URL of the git repository.</p>
<p>Returns 0/TRUE if the url could be retrieved; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the repository url.</p>
<section id="usage-example-195" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb198"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb198-1" title="1"><span class="kw">if</span> <span class="ex">findOutGitRepositoryUrl</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;The repository url is </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
</section>
<section id="phabricator" class="level2 module">
<h2>phabricator</h2>
<p>Phabricator-related functions.</p>
<section id="retrievecredentialpasswordfromphabricator-keyid-phabricatorurl-apitoken" class="level3 function">
<h3>retrieveCredentialPasswordFromPhabricator <code>keyId</code> <code>phabricatorUrl</code> <code>apiToken</code></h3>
<p>Retrieves a credential’s password from Phabricator.</p>
<section id="parameters-160" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>keyId</code></dt>
<dd>The key id.
</dd>
<dt><code>phabricatorUrl</code></dt>
<dd>The Phabricator URL.
</dd>
<dt><code>apiToken</code></dt>
<dd>The API token.
</dd>
</dl>
<p>Returns 0/TRUE if the credential password could be retrieved; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the credential password.</p>
</section>
<section id="usage-example-196" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb199"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb199-1" title="1"><span class="kw">if</span> <span class="ex">retrieveCredentialPasswordFromPhabricator</span> <span class="st">&quot;4&quot;</span> <span class="st">&quot;http://phabricator.osoco.es&quot;</span> <span class="st">&quot;api-aouktahoekoahk&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Credential password: </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrievecredentialprivatekeyfromphabricator-keyid-phabricatorurl-apitoken" class="level3 function">
<h3>retrieveCredentialPrivateKeyFromPhabricator <code>keyId</code> <code>phabricatorUrl</code> <code>apiToken</code></h3>
<p>Retrieves a credential’s private key from Phabricator.</p>
<section id="parameters-161" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>keyId</code></dt>
<dd>The key id.
</dd>
<dt><code>phabricatorUrl</code></dt>
<dd>The Phabricator URL.
</dd>
<dt><code>apiToken</code></dt>
<dd>The API token.
</dd>
</dl>
<p>Returns 0/TRUE if the credential’s private key could be retrieved; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the credential private key.</p>
</section>
<section id="usage-example-197" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb200"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb200-1" title="1"><span class="kw">if</span> <span class="ex">retrieveCredentialPrivateKeyFromPhabricator</span> <span class="st">&quot;4&quot;</span> <span class="st">&quot;http://phabricator.osoco.es&quot;</span> <span class="st">&quot;api-aouktahoekoahk&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Credential private key: </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrievecredentialusernamefromphabricator-keyid-phabricatorurl-apitoken" class="level3 function">
<h3>retrieveCredentialUsernameFromPhabricator <code>keyId</code> <code>phabricatorUrl</code> <code>apiToken</code></h3>
<p>Retrieves the username of a credential from Phabricator.</p>
<section id="parameters-162" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>keyId</code></dt>
<dd>The key id.
</dd>
<dt><code>phabricatorUrl</code></dt>
<dd>The Phabricator URL.
</dd>
<dt><code>apiToken</code></dt>
<dd>The API token.
</dd>
</dl>
<p>Returns 0/TRUE if the username could be retrieved; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the credential username.</p>
</section>
<section id="usage-example-198" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb201"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb201-1" title="1"><span class="kw">if</span> <span class="ex">retrieveCredentialUsernameFromPhabricator</span> <span class="st">&quot;4&quot;</span> <span class="st">&quot;http://phabricator.osoco.es&quot;</span> <span class="st">&quot;api-aouktahoekoahk&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Credential username: </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
</section>
<section id="rabbitmq" class="level2 module">
<h2>rabbitmq</h2>
<p>Functions useful when bootstrapping RabbitMQ servers.</p>
<p>You might be interested in importing rabbitmq-cli as well, to inject processing of the required environment variables above.</p>
<section id="environment-variables-4" class="level4">
<h4>Environment variables</h4>
<dl>
<dt><code>BOOTSTRAPPED_FILE</code></dt>
<dd>The path of the file used for indicating whether the bootstrapping was completed.
</dd>
<dt><code>LOCK_FILE</code></dt>
<dd>The path of the file used to lock the bootstrapping process.
</dd>
<dt><code>RABBITMQ_NODENAME</code></dt>
<dd>The name of the RabbitMQ node.
</dd>
<dt><code>ADMIN_PASSWORD</code></dt>
<dd>The password of the ‘admin’ user.
</dd>
</dl>
</section>
<section id="adduser-username-password" class="level3 function">
<h3>addUser <code>username</code> <code>password</code></h3>
<p>Adds a new RabbitMQ user.</p>
<p>Returns 0/TRUE if the user was added; 1/FALSE otherwise.</p>
<section id="parameters-163" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>username</code></dt>
<dd>The username.
</dd>
<dt><code>password</code></dt>
<dd>The password.
</dd>
</dl>
</section>
<section id="usage-example-199" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb202"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb202-1" title="1"><span class="kw">if</span> <span class="ex">addUser</span> <span class="st">&quot;admin&quot;</span> <span class="st">&quot;secret&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;User admin added successfully&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="addvhost-virtualhost" class="level3 function">
<h3>addVhost <code>virtualHost</code></h3>
<p>Declares a virtual host.</p>
<section id="parameters-164" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>virtualHost</code></dt>
<dd>The virtual host.
</dd>
</dl>
<p>Returns 0/TRUE if the virtual host gets created successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-200" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb203"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb203-1" title="1"><span class="kw">if</span> ! <span class="ex">addVhost</span> <span class="st">&quot;/&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Could not add vhost /&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="declarebdbinding-source-destinationtype-destination-routingkey" class="level3 function">
<h3>declareBdbinding <code>source</code> <code>destinationType</code> <code>destination</code> <code>routingKey</code></h3>
<p>Declares a binding.</p>
<section id="parameters-165" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>source</code></dt>
<dd>The source.
</dd>
<dt><code>destinationType</code></dt>
<dd>The destination type.
</dd>
<dt><code>destination</code></dt>
<dd>The destination.
</dd>
<dt><code>routingKey</code></dt>
<dd>The routing key.
</dd>
</dl>
<p>Returns 0/TRUE if the binding gets created successfully; 1/FALSE othervise.</p>
</section>
<section id="usage-example-201" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb204"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb204-1" title="1"><span class="kw">if</span> <span class="ex">declareBinding</span> <span class="st">&quot;my-exchange&quot;</span> <span class="st">&quot;queue&quot;</span> <span class="st">&quot;my-queue&quot;</span> <span class="st">&quot;#&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;binding created successfully&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="declareexchange-name-type-durable-internal-args" class="level3 function">
<h3>declareExchange <code>name</code> <code>type</code> <code>durable</code> <code>internal</code> <code>args*</code></h3>
<p>Declares an exchange.</p>
<section id="parameters-166" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>name</code></dt>
<dd>The exchange name.
</dd>
<dt><code>type</code></dt>
<dd>The exchange type.
</dd>
<dt><code>durable</code></dt>
<dd>Whether the exchange is durable. Optional.
</dd>
<dt><code>internal</code></dt>
<dd>Whether the exchange is internal. Optional.
</dd>
<dt><code>args</code></dt>
<dd>Additional arguments. Optional.
</dd>
</dl>
<p>Returns 0/TRUE if the exchange gets created successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-202" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb205"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb205-1" title="1"><span class="kw">if</span> <span class="ex">declareExchange</span> <span class="st">&quot;ex&quot;</span> <span class="st">&quot;topic&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;ex exchange created successfully&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="declarequeue-name-durable" class="level3 function">
<h3>declareQueue <code>name</code> <code>durable</code></h3>
<p>Declares a queue.</p>
<section id="parameters-167" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>name</code></dt>
<dd>The queue name.
</dd>
<dt><code>durable</code></dt>
<dd>Whether it’s durable or not.
</dd>
</dl>
<p>Returns 0/TRUE if the queue is created successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-203" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb206"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb206-1" title="1"><span class="kw">if</span> <span class="ex">declareQueue</span> <span class="st">&quot;my-queue&quot;</span> <span class="st">&quot;true&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Queue my-queue created successfully&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="deleteuser-user" class="level3 function">
<h3>deleteUser <code>user</code></h3>
<p>Deletes an user.</p>
<section id="parameters-168" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>user</code></dt>
<dd>The user.
</dd>
</dl>
<p>Returns 0/TRUE if the user gets deleted successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-204" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb207"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb207-1" title="1"><span class="kw">if</span> <span class="ex">deleteUser</span> <span class="st">&quot;guest&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;guest user deleted successfully&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="israbbitmqrunning" class="level3 function">
<h3>isRabbitmqRunning</h3>
<p>Checks whether RabbitMQ is running.</p>
<p>Returns 0/TRUE if it’s running; 1/FALSE otherwise.</p>
<section id="usage-example-205" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb208"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb208-1" title="1"><span class="kw">if</span> ! <span class="ex">isRabbitmqRunning</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;RabbitMQ is not running&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="rabbitmq_migrate" class="level3 function">
<h3>rabbitmq_migrate</h3>
<p>Migrates the RabbitMQ instance.</p>
<p>Important: This function delegates the migration logic to an external function “rabbitmq_patch”.</p>
<section id="usage-example-206" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb209"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb209-1" title="1"><span class="ex">rabbitmq_migrate</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="setpermissions-virtualhost-user-configurepermissions-writepermissions-readpermissions" class="level3 function">
<h3>setPermissions <code>virtualHost</code> <code>user</code> <code>configurePermissions</code> <code>writePermissions</code> <code>readPermissions</code></h3>
<p>Sets RabbitMQ permissions.</p>
<section id="parameters-169" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>virtualHost</code></dt>
<dd>The virtualhost.
</dd>
<dt><code>user</code></dt>
<dd>The user.
</dd>
<dt><code>configurePermissions</code></dt>
<dd>The configure permissions.
</dd>
<dt><code>writePermissions</code></dt>
<dd>The write permissions.
</dd>
<dt><code>readPermissions</code></dt>
<dd>The read permissions.
</dd>
</dl>
<p>Returns 0/TRUE if the permissions were set successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-207" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb210"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb210-1" title="1"><span class="kw">if</span> ! <span class="ex">setPermissions</span> / admin <span class="st">&quot;.*&quot;</span> <span class="st">&quot;.*&quot;</span> <span class="st">&quot;.*&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Could not set permissions for admin&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="setpolicy-name-match-body-type" class="level3 function">
<h3>setPolicy <code>name</code> <code>match</code> <code>body</code> <code>type</code></h3>
<p>Sets a policy.</p>
<section id="parameters-170" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>name</code></dt>
<dd>The policy name.
</dd>
<dt><code>match</code></dt>
<dd>The match.
</dd>
<dt><code>body</code></dt>
<dd>The policy body.
</dd>
<dt><code>type</code></dt>
<dd>The object type: which objects apply.
</dd>
</dl>
<p>Returns 0/TRUE if the policy gets created successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-208" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb211"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb211-1" title="1"><span class="kw">if</span> <span class="ex">setPolicy</span> <span class="st">&quot;my-dlx&quot;</span> <span class="st">&quot;^my-ex&quot;</span> <span class="st">&#39;{&quot;dead-letter-exchange&quot;:&quot;my-dlx&quot;}&#39;</span> <span class="st">&quot;queues&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Policy created successfully&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="setusertags-user-tags" class="level3 function">
<h3>setUserTags <code>user</code> <code>tags+</code></h3>
<p>Sets user tags.</p>
<section id="parameters-171" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>user</code></dt>
<dd>The user.
</dd>
<dt><code>tags</code></dt>
<dd>The tags.
</dd>
</dl>
<p>Returns 0/TRUE if the tags were set successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-209" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb212"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb212-1" title="1"><span class="kw">if</span> ! <span class="ex">setUserTags</span> admin Admin<span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Could not set Admin tag for admin user&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
</section>
<section id="vault" class="level2 module">
<h2>vault</h2>
<p>Functions useful when interacting with Hashicorp’s Vault.</p>
<section id="authorizeinvault" class="level3 function">
<h3>authorizeInVault</h3>
<p>Performs the Vault authorization.</p>
<section id="usage-example-210" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb213"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb213-1" title="1"><span class="ex">authorizeInVault</span><span class="kw">;</span></a></code></pre></div>
</section>
</section>
<section id="buildpipelineparameterpathinvault-folder-team-pipeline-parameter" class="level3 function">
<h3>buildPipelineParameterPathInVault <code>folder</code> <code>team</code> <code>pipeline</code> <code>parameter</code></h3>
<p>Builds the path of a pipeline parameter in Vault.</p>
<section id="parameters-172" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>folder</code></dt>
<dd>The Concourse folder.
</dd>
<dt><code>team</code></dt>
<dd>The Concourse team.
</dd>
<dt><code>pipeline</code></dt>
<dd>The pipeline name.
</dd>
<dt><code>parameter</code></dt>
<dd>The parameter name.
</dd>
</dl>
<p>Returns 0/TRUE if the path was constructed successfully; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the path.</p>
</section>
<section id="usage-example-211" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb214"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb214-1" title="1"><span class="kw">if</span> <span class="ex">buildPipelineParameterPathInVault</span> <span class="st">&quot;/concourse&quot;</span> <span class="st">&quot;main&quot;</span> <span class="st">&quot;default&quot;</span> <span class="st">&quot;src-git-branch&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;src-git-branch in Vault under: </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="checkvaultrunning" class="level3 function">
<h3>checkVaultRunning</h3>
<p>Checks if a Vault container (whose name is matches ${VAULT_CONTAINER_NAME}) is running.</p>
<p>Returns 0/TRUE if Vault is running; 1/FALSE otherwise.</p>
<section id="usage-example-212" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb215"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb215-1" title="1"><span class="kw">if</span> <span class="ex">checkVaultRunning</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">${VAULT_CONTAINER_NAME}</span><span class="st"> is running&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="createorstartvaultcontainer-virtualhost-network" class="level3 function">
<h3>createOrStartVaultContainer <code>virtualHost</code> <code>network</code></h3>
<p>Creates the Vault container if it does not exist, or starts the already existing Vault container.</p>
<section id="parameters-173" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>virtualHost</code></dt>
<dd>The virtual host.
</dd>
<dt><code>network</code></dt>
<dd>The network.
</dd>
</dl>
<p>Returns 0/TRUE if the container was missing and could be created, or if it was started; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-213" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb216"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb216-1" title="1"><span class="kw">if</span> <span class="ex">createOrStartVaultContainer</span> <span class="st">&quot;vault.example.com&quot;</span> <span class="st">&quot;my_network&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;vault.example.com started in my_network&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="deletevaultcontainer-containername" class="level3 function">
<h3>deleteVaultContainer <code>containerName</code></h3>
<p>Deletes the Vault container if it exists.</p>
<section id="parameters-174" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>containerName</code></dt>
<dd>The name of the Vault container.
</dd>
</dl>
<p>Returns 0/TRUE if the container was running and could be deleted, or if it didn’t exist; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-214" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb217"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb217-1" title="1"><span class="kw">if</span> <span class="ex">deleteVaultContainer</span> vault<span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Vault container deleted&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="generatevaulthclfile-file-leasettl-maxleasettl-vaultip" class="level3 function">
<h3>generateVaultHclFile <code>file</code> <code>leaseTTL</code> <code>maxLeaseTTL</code> <code>vaultIP</code></h3>
<p>Generates the vault.hcl file.</p>
<section id="parameters-175" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The vault.hcl file.
</dd>
<dt><code>leaseTTL</code></dt>
<dd>The lease TTL.
</dd>
<dt><code>maxLeaseTTLR</code></dt>
<dd>The maximum lease TTL.
</dd>
<dt><code>vaultIP</code></dt>
<dd>The Vault IP. Optional. Defaults to 0.0.0.0.
</dd>
</dl>
<p>Returns 0/TRUE if the file gets generated successfully; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-215" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb218"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb218-1" title="1"><span class="kw">if</span> <span class="ex">generateVaultHclFile</span> <span class="st">&quot;./vault.hcl&quot;</span> <span class="st">&quot;168h&quot;</span> <span class="st">&quot;720h&quot;</span> localhost<span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;vault.hcl file generated successfully&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrievevaulttoken-file" class="level3 function">
<h3>retrieveVaultToken <code>file</code></h3>
<p>Retrieves a Vault token from given file.</p>
<section id="parameters-176" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>file</code></dt>
<dd>The file.
</dd>
</dl>
<p>Returns 0/TRUE if the token is retrieved; 1/FALSE otherwise.</p>
<p>If the function returns 0/TRUE, the variable RESULT contains the Vault token.</p>
</section>
<section id="usage-example-216" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb219"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb219-1" title="1"><span class="kw">if</span> <span class="ex">retrieveVaultToken</span> <span class="st">&quot;keys.txt&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Vault token: </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="retrievevaulturl" class="level3 function">
<h3>retrieveVaultUrl</h3>
<p>Builds the Vault url.</p>
<p>Returns 0/TRUE if the Vault url was built; 1/FALSE otherwise.</p>
<p>If the funcion returns 0/TRUE, the variable RESULT contains the Vault url.</p>
<section id="usage-example-217" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb220"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb220-1" title="1"><span class="kw">if</span> <span class="ex">retrieveVaultUrl</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;The Vault URL is </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="runvaultcommand-command-args" class="level3 function">
<h3>runVaultCommand <code>command</code> <code>args*</code></h3>
<p>Runs a command inside the Vault container.</p>
<section id="parameters-177" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>command</code></dt>
<dd>The command to run.
</dd>
<dt><code>args</code></dt>
<dd>The command arguments. Optional.
</dd>
</dl>
<p>Returns 0/TRUE if the command succeeds; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-218" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb221"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb221-1" title="1"><span class="kw">if</span> <span class="ex">runVaultCommand</span> vault read<span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;vault read -&gt; </span><span class="va">${RESULT}</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="writefileinvault-source-destination" class="level3 function">
<h3>writeFileInVault <code>source</code> <code>destination</code></h3>
<p>Writes a file in Vault.</p>
<section id="parameters-178" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>source</code></dt>
<dd>The source path.
</dd>
<dt><code>destination</code></dt>
<dd>The destination path.
</dd>
</dl>
<p>Returns 0/TRUE if the private key was stored; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-219" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb222"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb222-1" title="1"><span class="kw">if</span> <span class="ex">writeFileInVault</span> <span class="st">&quot;config/concourse-private-key&quot;</span> <span class="st">&quot;concourse/main/main/private-key&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Private key written in Vault&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
</section>
</section>
<section id="writevalueinvault-destination-value" class="level3 function">
<h3>writeValueInVault <code>destination</code> <code>value</code></h3>
<p>Writes a setting in Vault.</p>
<section id="parameters-179" class="level4">
<h4>Parameters</h4>
<dl>
<dt><code>destination</code></dt>
<dd>The destination.
</dd>
<dt><code>value</code></dt>
<dd>The value.
</dd>
</dl>
<p>Returns 0/TRUE if the private key was stored; 1/FALSE otherwise.</p>
</section>
<section id="usage-example-220" class="level4">
<h4>Usage example</h4>
<div class="sourceCode" id="cb223"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb223-1" title="1"><span class="kw">if</span> <span class="ex">writeInVault</span> <span class="st">&quot;config/registry-username&quot;</span> <span class="st">&quot;johndoe&quot;</span><span class="kw">;</span> <span class="kw">then</span> <span class="bu">echo</span> <span class="st">&quot;Registry username written in Vault&quot;</span><span class="kw">;</span> <span class="kw">fi</span></a></code></pre></div>
<hr />
</section>
</section>
</section>
</section>
</div>
</body>

